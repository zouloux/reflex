{"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAsJ,YAAY,CAAC;;AAAnK,IAAI,QAAQ,GAAG,IAAI,AAAC;AAAA,IAAI,QAAQ,GAAG,IAAI,AAAC;AAAA,IAAI,UAAU,GAAG,KAAK,AAAC;AAAA,IAAI,YAAY,GAAG,kBAAkB,AAAC;AAAA,MAAM,CAAC,MAAM,CAAC,aAAa,GAAG,kBAAkB,CAAC;AAEtJ,+JAA+J,CAE/J;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA6CE,CACF,IAAI,UAAU,GAAG,4BAA4B,AAAC;AAC9C,IAAI,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,AAAC;AAErC,SAAS,MAAM,CAAC,UAAU,EAAE;IAC1B,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;IACjC,IAAI,CAAC,GAAG,GAAG;QACT,IAAI,EAAE,MAAM,CAAC,MAAM,CAAC,OAAO;QAC3B,gBAAgB,EAAE,EAAE;QACpB,iBAAiB,EAAE,EAAE;QACrB,MAAM,EAAE,SAAU,EAAE,EAAE;YACpB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,IAAI,WAAY,EAAE,CAAC,CAAC;SAClD;QACD,OAAO,EAAE,SAAU,EAAE,EAAE;YACrB,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SACjC;KACF,CAAC;IACF,MAAM,CAAC,MAAM,CAAC,OAAO,GAAG,SAAS,CAAC;CACnC;AAED,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC;AAC9B,IAAI,aAAa,EAEf,cAAc,EAEd,cAAc,CAChB,qCAAqC,CADrB,AAEf;AAED,SAAS,WAAW,GAAG;IACrB,OAAO,QAAQ,IAAK,CAAA,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,QAAQ,CAAC,QAAQ,GAAG,WAAW,CAAA,AAAC,CAAC;CAChG;AAED,SAAS,OAAO,GAAG;IACjB,OAAO,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC;CAClC,CAAC,wCAAwC;AAG1C,IAAI,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,AAAC;AAElC,IAAI,AAAC,CAAA,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,eAAe,CAAA,IAAK,OAAO,SAAS,KAAK,WAAW,EAAE;IAC5E,IAAI,QAAQ,GAAG,WAAW,EAAE,AAAC;IAC7B,IAAI,IAAI,GAAG,OAAO,EAAE,AAAC;IACrB,IAAI,QAAQ,GAAG,UAAU,IAAI,QAAQ,CAAC,QAAQ,IAAI,QAAQ,IAAI,CAAC,8BAA8B,IAAI,CAAC,QAAQ,CAAC,GAAG,KAAK,GAAG,IAAI,AAAC;IAC3H,IAAI,EAAE,GAAG,IAAI,SAAS,CAAC,QAAQ,GAAG,KAAK,GAAG,QAAQ,GAAI,CAAA,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,EAAE,CAAA,GAAI,GAAG,CAAC,AAAC,EAAC,wBAAwB;IAE9G,IAAI,MAAM,GAAG,OAAO,MAAM,KAAK,WAAW,GAAG,OAAO,OAAO,KAAK,WAAW,GAAG,IAAI,GAAG,OAAO,GAAG,MAAM,AAAC,EAAC,oDAAoD;IAC3J,0DAA0D;IAE1D,IAAI,iBAAiB,GAAG,KAAK,AAAC;IAE9B,IAAI;QACD,CAAA,GAAG,IAAI,CAAA,CAAE,gDAAgD,CAAC,CAAC;KAC7D,CAAC,OAAO,GAAG,EAAE;QACZ,iBAAiB,GAAG,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;KACnD,CAAC,aAAa;IAGf,EAAE,CAAC,SAAS,GAAG,eAAgB,KAAK,EAElC;QACA,aAAa,GAAG,EAAE,CAClB,4BAA4B,CADV,CAEjB;QACD,cAAc,GAAG,EAAE,CACnB,4BAA4B,CADT,CAElB;QACD,cAAc,GAAG,EAAE,CAAC;QACpB,IAAI,IAAI,GAEN,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,AAAC;QAEzB,IAAI,IAAI,CAAC,IAAI,KAAK,QAAQ,EAAE;YAC1B,uCAAuC;YACvC,IAAI,OAAO,QAAQ,KAAK,WAAW,EACjC,kBAAkB,EAAE,CAAC;YAGvB,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA,KAAK,GAAI,KAAK,CAAC,OAAO,KAAK,YAAY,CAAC,AAAC,EAAC,oBAAoB;YAE9F,IAAI,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,CAAA,KAAK,GAAI;gBAClC,OAAO,KAAK,CAAC,IAAI,KAAK,KAAK,IAAI,KAAK,CAAC,IAAI,KAAK,IAAI,IAAI,cAAc,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,YAAY,CAAC,CAAC;aACxH,CAAC,AAAC;YAEH,IAAI,OAAO,EAAE;gBACX,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,yEAAyE;gBAE1F,IAAI,OAAO,MAAM,KAAK,WAAW,IAAI,OAAO,WAAW,KAAK,WAAW,EACrE,MAAM,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC;gBAG3D,MAAM,eAAe,CAAC,MAAM,CAAC,CAAC;gBAE9B,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,cAAc,CAAC,MAAM,EAAE,CAAC,EAAE,CAAE;oBAC9C,IAAI,EAAE,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,AAAC;oBAE9B,IAAI,CAAC,cAAc,CAAC,EAAE,CAAC,EACrB,YAAY,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;iBAE1C;aACF,MAAM,UAAU,EAAE,CAAC;SACrB;QAED,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE;YACzB,+BAA+B;YAC/B,KAAK,IAAI,cAAc,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAE;gBAChD,IAAI,KAAK,GAAG,cAAc,CAAC,SAAS,GAAG,cAAc,CAAC,SAAS,GAAG,cAAc,CAAC,KAAK,AAAC;gBACvF,OAAO,CAAC,KAAK,CAAC,yBAAc,GAAM,cAAc,CAAC,OAAO,GAAG,IAAI,GAAG,KAAK,GAAG,MAAM,GAAG,cAAc,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;aAClH;YAEJ,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE;gBACnC,gCAAgC;gBAChC,kBAAkB,EAAE,CAAC;gBACrB,IAAI,OAAO,GAAG,kBAAkB,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,AAAC,EAAC,aAAa;gBAEtE,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;aACpC;SACF;KACF,CAAC;IAEF,EAAE,CAAC,OAAO,GAAG,SAAU,CAAC,EAAE;QACxB,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;KAC1B,CAAC;IAEF,EAAE,CAAC,OAAO,GAAG,WAAY;QACvB,OAAO,CAAC,IAAI,CAAC,6DAAkD,CAAI,CAAC;KAClE,CAAF;CACH;AAED,SAAS,kBAAkB,GAAG;IAC5B,IAAI,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC,AAAC;IAElD,IAAI,OAAO,EAAE;QACX,OAAO,CAAC,MAAM,EAAE,CAAC;QACjB,OAAO,CAAC,GAAG,CAAC,gCAA2B,CAAG,CAAC;KAC1C;CACJ;AAED,SAAS,kBAAkB,CAAC,WAAW,EAAE;IACvC,IAAI,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,AAAC;IAC5C,OAAO,CAAC,EAAE,GAAG,UAAU,CAAC;IACxB,IAAI,SAAS,GAAG,wNAAwN,AAAC;IAEzO,KAAK,IAAI,UAAU,IAAI,WAAW,CAAE;QAClC,IAAI,KAAK,GAAG,UAAU,CAAC,MAAM,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,KAAK,GAAK;YAC5E,OAAO,CAAC,EAAE,CAAC,CAAC;sCACoB,EAAE,kBAAkB,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,2FAA2F,EAAE,KAAK,CAAC,QAAQ,CAAC;AACvL,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;SACV,EAAE,EAAE,CAAC,GAAG,UAAU,CAAC,KAAK,AAAC;QAC1B,SAAS,IAAI,CAAC;;;eAGN,EAAK,UAAU,CAAC,OAAO,CAAC;;aAEpB,EAAD,KAAK,CAAC;;UAEX,EAAE,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA,IAAI,GAAI,oBAAS,GAAM,IAAI,GAAG,QAAQ,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;QAEvE,EAAD,UAAU,CAAC,aAAa,GAAG,CAAC,yCAAsC,EAAE,UAAU,CAAC,aAAa,CAAC,sCAAsC,CAAC,GAAG,EAAE,CAAC;;IAEhJ,CAAC,CAAC;KACH;IAED,SAAS,IAAI,QAAQ,CAAC;IACtB,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC;IAC9B,OAAO,OAAO,CAAC;CAChB;AAED,SAAS,UAAU,GAAG;IACpB,IAAI,QAAQ,IAAI,QAAQ,EACtB,QAAQ,CAAC,MAAM,EAAE,CAAC;SACb,IAAI,MAAM,IAAI,MAAM,CAAC,OAAO,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,EAC1D,MAAM,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;CAE3B;AAED,SAAS,UAAU,CAAC,MAAM,EAAE,EAAE,EAC9B,qCAAqC,CACrC;IACE,IAAI,OAAO,GAAG,MAAM,CAAC,OAAO,AAAC;IAE7B,IAAI,CAAC,OAAO,EACV,OAAO,EAAE,CAAC;IAGZ,IAAI,OAAO,GAAG,EAAE,AAAC;IACjB,IAAI,CAAC,EAAE,CAAC,EAAE,GAAG,AAAC;IAEd,IAAK,CAAC,IAAI,OAAO,CACf,IAAK,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE;QACvB,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAEvB,IAAI,GAAG,KAAK,EAAE,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,EAAE,EAChE,OAAO,CAAC,IAAI,CAAC;YAAC,MAAM;YAAE,CAAC;SAAC,CAAC,CAAC;KAE7B;IAGH,IAAI,MAAM,CAAC,MAAM,EACf,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,CAAC;IAG1D,OAAO,OAAO,CAAC;CAChB;AAED,SAAS,UAAU,CAAC,IAAI,EAAE;IACxB,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,EAAE,AAAC;IAE/B,OAAO,CAAC,MAAM,GAAG,WAAY;QAC3B,IAAI,IAAI,CAAC,UAAU,KAAK,IAAI,EAC1B,aAAa;QACb,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;KAErC,CAAC;IAEF,OAAO,CAAC,YAAY,CAAC,MAAM,EAC3B,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,aAAa;IAE1E,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;CACzD;AAED,IAAI,UAAU,GAAG,IAAI,AAAC;AAEtB,SAAS,SAAS,GAAG;IACnB,IAAI,UAAU,EACZ,OAAO;IAGT,UAAU,GAAG,UAAU,CAAC,WAAY;QAClC,IAAI,KAAK,GAAG,QAAQ,CAAC,gBAAgB,CAAC,wBAAwB,CAAC,AAAC;QAEhE,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,CAAE;YACrC,gCAAgC;YAChC,IAAI,IAAI,GAEN,KAAK,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC,AAAC;YAChC,IAAI,QAAQ,GAAG,WAAW,EAAE,AAAC;YAC7B,IAAI,mBAAmB,GAAG,QAAQ,KAAK,WAAW,GAAG,IAAI,MAAM,CAAC,gDAAgD,GAAG,OAAO,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,GAAG,GAAG,OAAO,EAAE,CAAC,AAAC;YACpL,IAAI,QAAQ,GAAG,gBAAgB,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,mBAAmB,AAAC;YAEzG,IAAI,CAAC,QAAQ,EACX,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;SAExB;QAED,UAAU,GAAG,IAAI,CAAC;KACnB,EAAE,EAAE,CAAC,CAAC;CACR;AAED,SAAS,WAAW,CAAC,KAAK,EAAE;IAC1B,IAAI,KAAK,CAAC,IAAI,KAAK,IAAI,EAAE;QACvB,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE;YACnC,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,AAAC;YAC9C,MAAM,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG,GAAG,KAAK,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;YAE5C,IAAI,KAAK,CAAC,YAAY,KAAK,UAAU,EACnC,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC;YAGzB,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,GAAK;gBACtC,IAAI,cAAc,AAAC;gBAEnB,MAAM,CAAC,MAAM,GAAG,IAAM,OAAO,CAAC,MAAM,CAAC,CAAC;gBAEtC,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC;gBACvB,CAAA,cAAc,GAAG,QAAQ,CAAC,IAAI,CAAA,KAAM,IAAI,IAAI,cAAc,KAAK,KAAK,CAAC,IAAY,cAAc,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;aACtH,CAAC,CAAC;SACJ,MAAM,IAAI,OAAO,aAAa,KAAK,UAAU,EAAE;YAC9C,iBAAiB;YACjB,IAAI,KAAK,CAAC,YAAY,KAAK,UAAU,EACnC,OAAO,OAAmB,KAAK,CAAC,GAAG,GAAG,KAAK,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;iBAE1D,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,GAAK;gBACtC,IAAI;oBACF,cAA0B,KAAK,CAAC,GAAG,GAAG,KAAK,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;oBAE1D,OAAO,EAAE,CAAC;iBACX,CAAC,OAAO,GAAG,EAAE;oBACZ,MAAM,CAAC,GAAG,CAAC,CAAC;iBACb;aACF,CAAC,CAAC;SAEN;KACF;CACF;AAED,eAAe,eAAe,CAAC,MAAM,EAAE;IACrC,MAAM,CAAC,eAAe,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAC7C,IAAI,eAAe,AAAC;IAEpB,IAAI;QACF,kEAAkE;QAClE,gEAAgE;QAChE,gEAAgE;QAChE,mDAAmD;QACnD,iDAAiD;QACjD,mDAAmD;QACnD,IAAI,CAAC,iBAAiB,EAAE;YACtB,IAAI,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,CAAA,KAAK,GAAI;gBACjC,IAAI,YAAY,AAAC;gBAEjB,OAAO,AAAC,CAAA,YAAY,GAAG,WAAW,CAAC,KAAK,CAAC,CAAA,KAAM,IAAI,IAAI,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,YAAY,CAAC,KAAK,CAAC,CAAA,GAAG,GAAI;oBAClH,oCAAoC;oBACpC,oEAAoE;oBACpE,IAAI,MAAM,IAAI,MAAM,CAAC,OAAO,IAAI,MAAM,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,gBAAgB,IAAI,CAAC,EAAE;wBAClF,IAAI,OAAO,wBAAwB,IAAI,WAAW,IAAI,MAAM,YAAY,wBAAwB,EAAE;4BAChG,MAAM,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;4BACxB,OAAO;yBACR;wBAED,KAAK,CAAC,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,4BAA4B,GAAG,kBAAkB,CAAC,KAAK,CAAC,GAAG,GAAG,KAAK,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;wBACrH,OAAO,WAAW,CAAC,KAAK,CAAC,CAAC;qBAC3B;oBAED,MAAM,GAAG,CAAC;iBACX,CAAC,CAAC;aACJ,CAAC,AAAC;YACH,eAAe,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;SAC/C;QAED,MAAM,CAAC,OAAO,CAAC,SAAU,KAAK,EAAE;YAC9B,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;SACrC,CAAC,CAAC;KACJ,QAAS;QACR,OAAO,MAAM,CAAC,eAAe,CAAC;QAE9B,IAAI,eAAe,EACjB,eAAe,CAAC,OAAO,CAAC,CAAA,MAAM,GAAI;YAChC,IAAI,MAAM,EAAE;gBACV,IAAI,eAAe,AAAC;gBAEnB,CAAA,eAAe,GAAG,QAAQ,CAAC,IAAI,CAAA,KAAM,IAAI,IAAI,eAAe,KAAK,KAAK,CAAC,IAAY,eAAe,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;aACzH;SACF,CAAC,CAAC;KAEN;CACF;AAED,SAAS,QAAQ,CAAC,MAAM,EAEtB,KAAK,EAEL;IACA,IAAI,OAAO,GAAG,MAAM,CAAC,OAAO,AAAC;IAE7B,IAAI,CAAC,OAAO,EACV,OAAO;IAGT,IAAI,KAAK,CAAC,IAAI,KAAK,KAAK,EACtB,SAAS,EAAE,CAAC;SACP,IAAI,KAAK,CAAC,IAAI,KAAK,IAAI,EAAE;QAC9B,IAAI,IAAI,GAAG,KAAK,CAAC,YAAY,CAAC,MAAM,CAAC,aAAa,CAAC,AAAC;QAEpD,IAAI,IAAI,EAAE;YACR,IAAI,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE;gBACrB,iEAAiE;gBACjE,oHAAoH;gBACpH,IAAI,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,AAAC;gBAEnC,IAAK,IAAI,GAAG,IAAI,OAAO,CACrB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,OAAO,CAAC,GAAG,CAAC,EAAE;oBAC5C,IAAI,EAAE,GAAG,OAAO,CAAC,GAAG,CAAC,AAAC;oBACtB,IAAI,OAAO,GAAG,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,AAAC;oBAEjD,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EACtB,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;iBAErC;aAEJ;YAED,IAAI,iBAAiB,EACnB,4DAA4D;YAC5D,+CAA+C;YAC9C,CAAA,GAAG,IAAI,CAAA,CAAE,KAAK,CAAC,MAAM,CAAC,CAAC;YACzB,CAAC,aAAa;YAGf,IAAI,EAAE,GAAG,MAAM,CAAC,eAAe,CAAC,KAAK,CAAC,EAAE,CAAC,AAAC;YAC1C,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,GAAG;gBAAC,EAAE;gBAAE,IAAI;aAAC,CAAC;SAChC,MAAM,IAAI,MAAM,CAAC,MAAM,EACtB,QAAQ,CAAC,MAAM,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;KAElC;CACF;AAED,SAAS,SAAS,CAAC,MAAM,EAAE,GAAE,EAAE;IAC7B,IAAI,OAAO,GAAG,MAAM,CAAC,OAAO,AAAC;IAE7B,IAAI,CAAC,OAAO,EACV,OAAO;IAGT,IAAI,OAAO,CAAC,GAAE,CAAC,EAAE;QACf,8EAA8E;QAC9E,IAAI,IAAI,GAAG,OAAO,CAAC,GAAE,CAAC,CAAC,CAAC,CAAC,AAAC;QAC1B,IAAI,OAAO,GAAG,EAAE,AAAC;QAEjB,IAAK,IAAI,GAAG,IAAI,IAAI,CAAE;YACpB,IAAI,OAAO,GAAG,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,AAAC;YAExD,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EACtB,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;SAE3B,CAAC,sGAAsG;QAGxG,OAAO,OAAO,CAAC,GAAE,CAAC,CAAC;QACnB,OAAO,MAAM,CAAC,KAAK,CAAC,GAAE,CAAC,CAAC,CAAC,0BAA0B;QAEnD,OAAO,CAAC,OAAO,CAAC,CAAA,EAAE,GAAI;YACpB,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;SACnC,CAAC,CAAC;KACJ,MAAM,IAAI,MAAM,CAAC,MAAM,EACtB,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE,GAAE,CAAC,CAAC;CAEhC;AAED,SAAS,cAAc,CAAC,MAAM,EAE5B,EAAE,EAEF,YAAY,EAEZ;IACA,IAAI,iBAAiB,CAAC,MAAM,EAAE,EAAE,EAAE,YAAY,CAAC,EAC7C,OAAO,IAAI,CAAC;IACb,CAAC,uGAAuG;IAGzG,IAAI,OAAO,GAAG,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,AAAC;IACjD,IAAI,QAAQ,GAAG,KAAK,AAAC;IAErB,MAAO,OAAO,CAAC,MAAM,GAAG,CAAC,CAAE;QACzB,IAAI,CAAC,GAAG,OAAO,CAAC,KAAK,EAAE,AAAC;QACxB,IAAI,CAAC,GAAG,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,AAAC;QAE5C,IAAI,CAAC,EACH,+EAA+E;QAC/E,QAAQ,GAAG,IAAI,CAAC;aACX;YACL,yDAAyD;YACzD,IAAI,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,AAAC;YAE7C,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;gBAClB,kFAAkF;gBAClF,QAAQ,GAAG,KAAK,CAAC;gBACjB,MAAM;aACP;YAED,OAAO,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC;SACpB;KACF;IAED,OAAO,QAAQ,CAAC;CACjB;AAED,SAAS,iBAAiB,CAAC,MAAM,EAE/B,EAAE,EAEF,YAAY,EAEZ;IACA,IAAI,OAAO,GAAG,MAAM,CAAC,OAAO,AAAC;IAE7B,IAAI,CAAC,OAAO,EACV,OAAO;IAGT,IAAI,YAAY,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,aAAa,CAAC,EAAE;QACvD,2EAA2E;QAC3E,yEAAyE;QACzE,IAAI,CAAC,MAAM,CAAC,MAAM,EAChB,OAAO,IAAI,CAAC;QAGd,OAAO,cAAc,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,EAAE,YAAY,CAAC,CAAC;KACxD;IAED,IAAI,aAAa,CAAC,EAAE,CAAC,EACnB,OAAO,IAAI,CAAC;IAGd,aAAa,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;IACzB,IAAI,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,AAAC;IAC9B,cAAc,CAAC,IAAI,CAAC;QAAC,MAAM;QAAE,EAAE;KAAC,CAAC,CAAC;IAElC,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,MAAM,EAC7D,OAAO,IAAI,CAAC;CAEf;AAED,SAAS,YAAY,CAAC,MAAM,EAE1B,EAAE,EAEF;IACA,IAAI,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,AAAC;IAC9B,MAAM,CAAC,OAAO,GAAG,EAAE,CAAC;IAEpB,IAAI,MAAM,IAAI,MAAM,CAAC,GAAG,EACtB,MAAM,CAAC,GAAG,CAAC,IAAI,GAAG,MAAM,CAAC,OAAO,CAAC;IAGnC,IAAI,MAAM,IAAI,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,MAAM,EAC7D,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,OAAO,CAAC,SAAU,EAAE,EAAE;QACjD,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;KACpB,CAAC,CAAC;IAGL,OAAO,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;IACxB,MAAM,CAAC,EAAE,CAAC,CAAC;IACX,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;IAE1B,IAAI,MAAM,IAAI,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,MAAM,EAC5D,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,OAAO,CAAC,SAAU,EAAE,EAAE;QAChD,IAAI,kBAAkB,GAAG,EAAE,CAAC,WAAY;YACtC,OAAO,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;SAC3C,CAAC,AAAC;QAEH,IAAI,kBAAkB,IAAI,cAAc,CAAC,MAAM,EAC7C,+BAA+B;QAC/B,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,kBAAkB,CAAC,CAAC;KAEjE,CAAC,CAAC;IAGL,cAAc,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;CAC3B;;;ACnkBD;;AAQA,0CAAgB,IAAI,CAInB;AAZD,yCAA6C;AAC7C,8CAA2E;AAC3E,6CAA8C;AAE9C,gFAAgF;AAEhF,CAAA,GAAA,qBAAc,CAAA,CAAE,IAAI,CAAE;AAEf,SAAS,IAAI,GAAI;IACvB,MAAM,CAAC,GAAG,CAAA,GAAA,wBAAiB,CAAA,CAAC,gBAAgB,CAAC;IAC7C,CAAA,GAAA,cAAM,CAAA,eAAE,eAAC,CAAA,GAAA,0BAAY,CAAA;;;;;;;MAAG,EAAE,QAAQ,CAAC,IAAI,CAAE;IACzC,CAAC,EAAE,CAAC;CACJ;AAED,IAAI,EAAE,CAAC;;;ACmFP;;AAjGA,2BAA2B;AAC3B,gGAAgG;AAEhG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA6BG,CAEH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA2DG,CAEH,wDAAwD;AACxD,uDAAuD;AACvD,6DAA2C;AAA3C,uEAA2C;AAC3C,uDAA8C;AAA9C,yDAA8C;AAA9C,yDAA8C;AAA9C,2DAA8C;AAC9C,qEAAyD;AAAzD,yEAAyD;AAAzD,qEAAyD;AACzD,gEAAsD;AAAtD,0FAAsD;AACtD,iDAAiD;AACjD,mDAA6C;AAA7C,+DAA6C;AAL7C,+BAA2C;AAC3C,2BAA8C;AAC9C,uCAAyD;AACzD,iCAAsD;AAEtD,2BAA6C;;;ACtG7C;;AAOA,sFAAsF;AAEtF,2CAAgB,KAAK,CAKpB;AAED,4FAA4F;AAE5F,gDAAgB,UAAU,CAOzB;AAzBD,6BAA4C;AAC5C,iCAA+C;AAC/C,yCAGsB;AAIf,SAAS,KAAK,CAAW,YAAkC,EAA2B;IAC5F,MAAM,SAAS,GAAG,CAAA,GAAA,wBAAkB,CAAA,EAAE;IACtC,MAAM,UAAU,GAAG,CAAA,GAAA,iCAAqB,CAAA,CAAE,YAAY,EAAE,IAAM,CAAA,GAAA,2BAAmB,CAAA,CAAE,SAAS,CAAE,CAAE;IAChG,SAAS,CAAC,YAAY,CAAC,IAAI,CAAE,UAAU,CAAE;IACzC,OAAO,UAAU,CAAA;CACjB;AAIM,SAAS,UAAU,CAAW,YAAkC,EAA2B;IACjG,MAAM,SAAS,GAAG,CAAA,GAAA,wBAAkB,CAAA,EAAE;IACtC,wBAAwB;IACxB,MAAM,UAAU,GAAG,CAAA,GAAA,iCAAqB,CAAA,CAAE,YAAY,EAAE,IAAM,CAAA,GAAA,2BAAmB,CAAA,CAAE,SAAS,CAAE,CAAE;IAChG,oGAAoG;IACpG,SAAS,CAAC,YAAY,CAAC,IAAI,CAAE,UAAU,CAAE;IACzC,OAAO,UAAU,CAAA;CACjB;;;ACzBD;;mEAoBa,6BAA6B;gEAG7B,0BAA0B;AAYvC,wDAAgB,kBAAkB,CAKjC;AAmDD,6FAA6F;AAE7F,iDAAgB,WAAW,CAoF1B;AAED,8FAA8F;AAE9F;;;;GAIG,CACH,kDAAgB,YAAY,CAwG3B;AAoBD,8CAAgB,QAAQ,CA8FvB;AApZD,iCAIkB;AAClB,2BAAmC;AAEnC,uCAAsG;AAa/F,MAAM,6BAA6B,GAAG,KAAK;AAG3C,MAAM,0BAA0B,GAAG,KAAK;AAE/C,iGAAiG;AACjG,MAAM,yBAAyB,sEAAsE,AAAC;AAEtG,qCAAqC;AACrC,MAAM,cAAc,aAAa;AAEjC,yGAAyG;AAEzG,wDAAwD;AACxD,IAAI,gBAAgB,GAAqB,IAAI;AACtC,SAAS,kBAAkB,GAAsB;IACvD,IAAK,CAAC,gBAAgB,IAAI,IAAqC,EAC9D,2GAA2G;IAC3G,MAAM,IAAI,KAAK,CAAC,CAAC,wFAAwF,CAAC,CAAC,CAAA;IAC5G,OAAO,gBAAgB,CAAA;CACvB;AAED,uFAAuF;AAEvF,SAAS,kBAAkB,CAAG,IAAW,EAAE,GAAW,EAAG;IACxD,uDAAuD;IACvD,MAAM,UAAU,GAAG,IAAI,KAAO,CAAA,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,EAAE,CAAC,CAAA,AAAE,AAAC;IACxE,gDAAgD;IAChD,MAAM,SAAS,GAAG,AAAE,CAAA,IAAI,CAAC,WAAW,EAAE,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,EAAE,GAAG,IAAI,CAAA,CAAG,KAAK,CAAC,CAAC,CAAC;IACpF,mCAAmC;IACnC,MAAM,QAAQ,GAAG,SAAS,GAAI,CAAA,UAAU,GAAG,GAAG,GAAG,EAAE,CAAA,AAAC;IACpD,OAAO;QAAE,SAAS;QAAE,QAAQ;QAAE,UAAU;KAAE,CAAA;CAC1C;AAED,wEAAwE;AACxE,SAAS,QAAQ,CAAG,KAAyB,EAAE,GAAU,EAAE,KAAiB,EAAG;IAC9E,IAAI,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,EACjB,KAAK,CAAC,WAAW,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;SAC1B,IAAI,KAAK,IAAI,IAAI,EACrB,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;SAEZ,IAAI,AAAC,CAAA,OAAO,KAAK,CAAA,AAAC,CAAC,CAAC,CAAC,IAAI,GAAG,IAAI,yBAAyB,CAAC,IAAI,CAAC,GAAG,CAAC,EACvE,KAAK,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;SAEnB,KAAK,CAAC,GAAG,CAAC,GAAG,KAAK,GAAG,IAAI,CAAC;CAC3B;AAED,SAAS,aAAa,CAAG,IAAU,EAAG;IACrC,IAAK,CAAC,IAAI,CAAC,IAAI,EAAG,OAAO;IACzB,cAAc;IACd,IAAK,MAAM,IAAI,IAAI,CAAC,IAAI,EACvB,eAAe;IACf,gEAAgE;IAC9D,IAAI,CAAC,IAAI,CAAoB,YAAY,CAAE,CAAC,EAAE,IAAI,CAAS;SAE7D,eAAe;IACb,IAAI,CAAC,IAAI,CAAmB,YAAY,CAAE,IAAI,CAAS;CAE1D;AAED,yFAAyF;AACzF,wDAAwD;AACxD,qDAAqD;AACrD,MAAM,mBAAmB,GAAG,CAAE,CAAQ,EAAE,CAAQ,GAC/C,8BAA8B;IAC9B,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,IAG5C,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAE,CAAA,GAAG,GAAI,GAAG,KAAK,UAAU,IAAK,CAAC,CAAC,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,AAAC,CAAE,AACpG;AAIM,SAAS,WAAW,CAAG,OAAa,EAAE,OAAa,EAAG;IAC5D,+CAA+C;IAC/C,MAAM,UAAU,GAAG,OAAO,CAAC,IAAI,IAAI,CAAA,GAAA,4BAAoB,CAAA;IACvD,4CAA4C;IAC5C,MAAM,GAAG,GACR,OAAO,GAAG,OAAO,CAAC,GAAG,GACpB,UAAU,GACR,QAAQ,CAAC,cAAc,CAAE,AAAC,OAAO,CAAe,KAAK,CAAC,KAAK,CAAE,GAC7D,QAAQ,CAAC,aAAa,CAAE,OAAO,CAAC,IAAI,CAAkB,AACxD,AACD;IACD,uBAAuB;IACvB,IAAK,UAAU,IAAI,OAAO,EAAG;QAC5B,MAAM,EAAE,KAAK,CAAA,EAAE,GAAG,AAAC,OAAO,CAAe,KAAK,AAAC;QAC/C,gCAAgC;QAChC,IAAK,KAAK,IAAI,AAAC,GAAG,CAAU,SAAS,EACpC,AAAE,GAAG,CAAW,SAAS,GAAG,KAAK;KAClC;IACD,gDAAgD;IAChD,IAAK,UAAU,EAAG,OAAO,GAAG,CAAA;IAC5B,oDAAoD;IACpD,OAAO,IAAI,MAAM,CAAC,IAAI,CAAE,OAAO,CAAC,KAAK,CAAE,CAAC,GAAG,CAAE,CAAA,IAAI,GAAI;QACpD,6DAA6D;QAC7D,IAAK,IAAI,IAAI,UAAU,EAAG,OAAM;QAChC,IAAK,IAAI,IAAI,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,KAAK,CAAE,IAAI,CAAE,KAAK,OAAO,CAAC,KAAK,CAAE,IAAI,CAAE,EAC5E,OAAM;QACP,uCAAuC;QACvC,IAAK,IAAI,IAAI,WAAW,EACvB,AAAE,GAAG,CAAc,SAAS,GAAG,EAAE,CAAC,qCAAqC;QAAtC;aAG7B,IAAK,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAG;YACjC,MAAM,EAAE,SAAS,CAAA,EAAE,QAAQ,CAAA,EAAE,UAAU,CAAA,EAAE,GAAG,kBAAkB,CAAE,IAAI,EAAE,GAAG,CAAa,AAAC;YACvF,GAAG,CAAC,mBAAmB,CAAE,SAAS,EAAE,GAAG,CAAE,0BAA0B,CAAE,CAAE,QAAQ,CAAE,EAAE,UAAU,CAAE;SAC/F,MAGA,AAAE,GAAG,CAAc,eAAe,CAAE,IAAI,CAAE;KAE3C,CAAC;IACF,eAAe;IACf,MAAM,CAAC,IAAI,CAAE,OAAO,CAAC,KAAK,CAAE,CAAC,GAAG,CAAE,CAAA,IAAI,GAAI;QACzC,IAAK,IAAI,IAAI,UAAU,EAAG,OAAM;QAChC,IAAI,KAAK,GAAG,OAAO,CAAC,KAAK,CAAE,IAAI,CAAE,AAAC;QAClC,uDAAuD;QACvD,IAAK,OAAO,IAAI,IAAI,IAAI,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,KAAK,CAAE,IAAI,CAAE,KAAK,KAAK,EACvE,OAAO;QACR,uCAAuC;QACvC,IAAK,IAAI,IAAI,WAAW,EACvB,AAAE,GAAG,CAAc,SAAS,GAAG,KAAK;aAGhC,IAAK,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAG;YACjC,MAAM,EAAE,SAAS,CAAA,EAAE,QAAQ,CAAA,EAAE,UAAU,CAAA,EAAE,GAAG,kBAAkB,CAAE,IAAI,EAAE,GAAG,CAAa,AAAC;YACvF,sEAAsE;YACtE,GAAG,CAAE,0BAA0B,CAAE,KAAK,IAAI,GAAG,EAAE,CAAC;YAChD,wDAAwD;YACxD,GAAG,CAAE,0BAA0B,CAAE,CAAE,QAAQ,CAAE,GAAG,KAAK,CAAC;YACtD,sBAAsB;YACtB,GAAG,CAAC,gBAAgB,CAAE,SAAS,EAAE,KAAK,EAAE,UAAU,CAAE;SACpD,MAEI;YACJ,4CAA4C;YAC5C,IAAK,IAAI,IAAI,WAAW,EACvB,IAAI,GAAG,OAAO;YACf,yBAAyB;YACzB,IAAK,IAAI,IAAI,OAAO,IAAI,KAAK,CAAC,OAAO,CAAE,KAAK,CAAE,EAC7C,KAAK,GAAG,KAAK,CAAC,MAAM,CAAE,CAAA,CAAC,GAAI,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC,CAAC,CAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE;iBAE3D,IAAK,IAAI,IAAI,OAAO,IAAI,AAAC,CAAA,OAAO,KAAK,CAAA,AAAC,CAAC,CAAC,CAAC,IAAI,GAAG,EACpD,kEAAkE;YAClE,OAAO,MAAM,CAAC,IAAI,CAAE,KAAK,CAAE,CAAC,GAAG,CAC9B,CAAA,CAAC,GAAI,QAAQ,CAAE,AAAC,GAAG,CAAiB,KAAK,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAE,CACxD,CAAC;iBAEE,IAAK,KAAK,IAAI,KAAK,EACvB,OAAO;YACR,uDAAuD;YACvD,0BAA0B;YAC1B,AAAE,GAAG,CAAc,YAAY,CAAE,IAAI,EAAE,KAAK,CAAE;SAC9C;KACD,CAAC;IACF,OAAO,GAAG,CAAC;CACX;AASM,SAAS,YAAY,CAAG,aAAmB,EAAE,aAAoB,EAAG;IAC1E,6DAA6D;IAC7D,+BAA+B;IAC/B,MAAM,WAAW,GAAG,aAAa,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE;IACxD,MAAM,WAAW,GAAG,aAAa,EAAE,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE;IACzD,2GAA2G;IAC3G,IAAK,CAAC,WAAW,EAAG,OAAO;IAC3B,MAAM,SAAS,GAAG,aAAa,CAAC,GAAG,AAAW;IAC9C,6DAA6D;IAC7D,mEAAmE;IACnE,0BAA0B;IAC1B,aAAa,CAAC,KAAK,GAAG,IAAI,GAAG,EAAE;IAC/B,MAAM,WAAW,GAAG,CAAA,CAAC,GAAI;QACxB,IAAK,CAAC,EAAE,GAAG,EAAG,aAAa,CAAC,KAAK,CAAE,CAAC,CAAC,GAAG,CAAE,GAAG,CAAC;KAC9C;IACD,oDAAoD;IACpD,4CAA4C;IAC5C,IAAK,CAAC,WAAW,EAAG;QACnB,WAAW,CAAC,GAAG,CAAE,CAAA,YAAY,GAAI;YAChC,IAAI,CAAC,YAAY,EAAE,OAAO;YAC1B,QAAQ,CAAE,YAAY,CAAE;YACxB,SAAS,CAAC,WAAW,CAAE,YAAY,CAAC,GAAG,CAAE;YACzC,iDAAiD;YACjD,WAAW,CAAE,YAAY,CAAE;SAC3B,CAAC;QACF,OAAO;KACP;IACD,wEAAwE;IACxE,mCAAmC;IACnC,kDAAkD;IAClD,WAAW,CAAC,GAAG,CAAE,WAAW,CAAE;IAC9B,2FAA2F;IAC3F,kDAAkD;IAClD,MAAM,WAAW,GAAG,WAAW,CAAC,GAAG,CAClC,CAAA,QAAQ,GAAI,CAAC,CAAE,CAAA,QAAQ,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAA,AAAE,CACpE;IACD,wDAAwD;IACxD,MAAM,aAAa,GAAG,aAAa,CAAC,KAAK;IACzC,IAAI,aAAa,GAAG,CAAC;IACrB,kDAAkD;IAClD,WAAW,CAAC,GAAG,CAAE,CAAC,YAAY,EAAE,CAAC,GAAK;QACrC,0DAA0D;QAC1D,yEAAyE;QACzE,mBAAmB;QACnB,IAAK,WAAW,CAAC,CAAC,CAAC,EAClB,aAAa,EAAG;QACjB,eAAe,CACf,kFAAkF;QAClF,0EAA0E;QAC1E,IAAK,CAAC,YAAY,EACjB,OAAO;QACR,oDAAoD;QACpD,iCAAiC,CACjC,IACC,YAAY,CAAC,GAAG,IACb,aAAa,CAAE,YAAY,CAAC,GAAG,CAAE,IACjC,aAAa,CAAE,YAAY,CAAC,GAAG,CAAE,CAAC,IAAI,IAAI,YAAY,CAAC,IAAI,EAC7D;YACD,MAAM,OAAO,GAAG,aAAa,CAAE,YAAY,CAAC,GAAG,CAAE;YACjD,QAAQ,CAAE,YAAY,EAAE,OAAO,CAAE;YACjC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC;YACrB,uEAAuE;YACvE,MAAM,cAAc,GAAG,CAAC,GAAG,aAAa;YACxC,+DAA+D;YAC/D,2EAA2E;YAC3E,IAAK,WAAW,CAAC,OAAO,CAAE,OAAO,CAAE,IAAI,cAAc,EACpD,SAAS,CAAC,YAAY,CAAE,YAAY,CAAC,GAAG,EAAE,SAAS,CAAC,QAAQ,CAAE,CAAC,CAAE,CAAE;SACpE,MAGI,IAAK,YAAY,CAAC,GAAG,IAAI,CAAC,aAAa,CAAE,YAAY,CAAC,GAAG,CAAE,EAAG;YAClE,QAAQ,CAAE,YAAY,CAAE;YACxB,SAAS,CAAC,YAAY,CAAE,YAAY,CAAC,GAAG,EAAE,SAAS,CAAC,QAAQ,CAAE,CAAC,CAAE,CAAE;YACnE,aAAa,EAAG;SAChB,MAII,IAAK,CAAC,IAAI,WAAW,IAAI,WAAW,CAAE,CAAC,CAAE,IAAI,WAAW,CAAE,CAAC,CAAE,CAAC,IAAI,IAAI,YAAY,CAAC,IAAI,EAAG;YAC9F,MAAM,OAAO,GAAG,WAAW,CAAE,CAAC,CAAE;YAChC,QAAQ,CAAE,YAAY,EAAE,OAAO,CAAE;YACjC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC;SACrB,MAGI;YACJ,QAAQ,CAAE,YAAY,CAAE;YACxB,SAAS,CAAC,YAAY,CAAE,YAAY,CAAC,GAAG,EAAE,SAAS,CAAC,QAAQ,CAAE,CAAC,CAAE,CAAE;YACnE,aAAa,EAAG;SAChB;KACD,CAAC;IACF,2CAA2C;IAC3C,kDAAkD;IAClD,WAAW,CAAC,GAAG,CAAE,CAAA,YAAY,GAAI;QAChC,IAAK,YAAY,IAAI,CAAC,YAAY,CAAC,KAAK,EAAG;YAC1C,wBAAwB;YACxB,CAAA,GAAA,sCAA2B,CAAA,CAAE,YAAY,EAAE,KAAK,CAAE,CAAC;YACnD,aAAa;YACb,MAAM,EAAE,GAAG,CAAA,EAAE,GAAG,YAAY;YAC5B,YAAY,CAAC,GAAG,GAAG,IAAI,CAAC;YACxB,aAAa,CAAE,YAAY,CAAE;YAC7B,SAAS,CAAC,WAAW,CAAE,GAAG,CAAE;SAC5B;KACD,CAAC;CACF;AAED,0FAA0F;AAE1F,SAAS,mBAAmB,CAA+B,IAAmC,EAAE,SAA2B,EAAY;IACtI,iCAAiC;IACjC,SAAS,CAAC,KAAK,GAAG,IAAI;IACtB,IAAI,CAAC,UAAU,GAAG,SAAS;IAC3B,0BAA0B;IAC1B,gBAAgB,GAAG,SAAS,CAAC;IAC7B,kCAAkC;IAClC,0CAA0C;IAC1C,oBAAoB;IACpB,MAAM,MAAM,GAAG,AAAC,CAAA,SAAS,CAAC,OAAO,IAAI,IAAI,CAAC,IAAI,AAAkB,CAAA,CAC9D,KAAK,CAAE,SAAS,EAAE;QAAE,SAAS,CAAC,WAAW,CAAC,KAAK;KAAE,CAAC;IACpD,4BAA4B;IAC5B,gBAAgB,GAAG,IAAI;IACvB,OAAO,MAAM,CAAW;CACxB;AAEM,SAAS,QAAQ,CAAG,OAAa,EAAE,OAAc,EAAG;IAC1D,6DAA6D;IAC7D,gFAAgF;IAChF,gDAAgD;IAChD,IAAK,OAAO,IAAI,OAAO,KAAK,OAAO,EAClC,OAAO,GAAG,CAAA,GAAA,eAAU,CAAA,CAAE,OAAO,CAAE;IAChC,wDAAwD;IACxD,IAAI,SAAS,GAAqB,OAAO,EAAE,UAAU;IACrD,uCAAuC;IACvC,IAAI,YAAY,AAAM;IACtB,IAAK,CAAC,SAAS,IAAI,CAAA,GAAA,mBAAW,CAAA,CAAC,OAAO,CAAC,IAAI,CAAC,EAAG;QAC9C,0EAA0E;QAC1E,SAAS,GAAG,CAAA,GAAA,kCAAuB,CAAA,CAAE,OAAO,CAAoC;QAChF,0DAA0D;QAC1D,MAAM,MAAM,GAAG,mBAAmB,CAAE,OAAO,EAAoC,SAAS,CAAE;QAC1F,6DAA6D;QAC7D,IAAK,CAAA,GAAA,mBAAW,CAAA,CAAC,MAAM,CAAC,EAAG;YAC1B,SAAS,CAAC,OAAO,GAAG,MAAM,AAAkB;YAC5C,SAAS,CAAC,SAAS,GAAG,IAAI;SAC1B,MAEI,IAAK,AAAC,CAAA,OAAO,MAAM,CAAA,AAAC,CAAC,CAAC,CAAC,IAAI,GAAG,IAAI,MAAM,IAAI,MAAM,EAAG;YACzD,SAAS,CAAC,OAAO,GAAG,OAAO,CAAC,IAAI,AAAkB;YAClD,SAAS,CAAC,SAAS,GAAG,KAAK;YAC3B,YAAY,GAAG,MAAM;SACrB;KACD;IACD,IAAI,GAAG,AAAU;IACjB,gCAAgC;IAChC,IAAK,CAAC,SAAS,EACd,OAAO,CAAC,GAAG,GAAG,GAAG,GAAG,WAAW,CAAE,OAAO,EAAE,OAAO,CAAE;SAG/C;QACJ,qFAAqF;QACrF,mFAAgF;QAChF,2FAA2F;QAC3F,uEAAuE;QACvE,oEAAoE;QACpE,2CAA2C;QAC3C,uDAAuD;QACvD,+CAA+C;QAC/C,mFAAmF;QACnF,IACC,6DAA6D;QAC7D,CAAC,YAAY,IAEV,OAAO,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,wBAAwB;QAAzB,IAE/B,OAAO,CAAC,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,4CAA4C;QAA7C,IAG5B,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,IAEnC,mBAAmB,CAAC,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,CAAC,EACnD;YACD,2DAA2D;YAC3D,uEAAuE;YACvE,0BAA0B;YAC1B,4DAA4D;YAC5D,yDAAyD;YACzD,OAAO,CAAC,KAAK,CAAC,QAAQ,GAAG,OAAO,CAAC,KAAK,CAAC,QAAQ;YAC/C,OAAO,CAAC,GAAG,GAAG,GAAG,GAAG,OAAO,CAAC,GAAG;SAC/B,MAEI,IAAK,CAAC,YAAY,EAAG;YACzB,SAAS,CAAC,WAAW,CAAC,GAAG,CAAE,OAAO,CAAC,KAAK,CAAE;YAC1C,YAAY,GAAG,mBAAmB,CAAS,OAAO,EAAoC,SAAS,CAAE;SACjG;QACD,oDAAoD;QACpD,IAAK,YAAY,EAAG;YACnB,uDAAuD;YACvD,OAAO,CAAC,KAAK,CAAC,QAAQ,GAAG,CAAA,GAAA,wBAAgB,CAAA,CAAE,YAAY,CAAE;YACzD,wBAAwB;YACxB,OAAO,CAAC,GAAG,GAAG,GAAG,GAAG,WAAW,CAAE,YAAY,EAAE,OAAO,CAAE;YACxD,mEAAmE;YACnE,OAAO,CAAC,IAAI,GAAG,YAAY,CAAC,IAAI;SAChC;QACD,4BAA4B;QAC5B,OAAO,CAAC,UAAU,GAAG,SAAS;QAC9B,SAAS,CAAC,KAAK,GAAG,OAAO,AAAO;QAChC,sCAAsC;QACtC,SAAS,CAAC,QAAQ,GAAG,KAAK;KAC1B;IACD,qBAAqB;IACrB,aAAa,CAAE,OAAO,CAAE;IACxB,4DAA4D;IAC5D,IAAK,GAAG,YAAY,OAAO,EAC1B,YAAY,CAAE,OAAO,EAAE,OAAO,CAAE;IACjC,wDAAwD;IACxD,IAAK,SAAS,IAAI,CAAC,SAAS,CAAC,SAAS,EACrC,CAAA,GAAA,sCAA2B,CAAA,CAAE,OAAO,EAAE,IAAI,CAAE;IAC7C,gCAAgC;IAChC,SAAS,EAAE,eAAe,CAAC,GAAG,CAAE,CAAA,CAAC,GAAI,CAAC,EAAE,CAAE;CAC1C;;;ACpZD;;0DAgBa,oBAAoB;0DACpB,oBAAoB;gDASpB,UAAU;iDAMV,WAAW;iDAGX,WAAW;AAExB,sDAAgB,gBAAgB,CAG/B;AAxBM,MAAM,oBAAoB,GAAG,IAAI;AACjC,MAAM,oBAAoB,GAAG,IAAI;AASjC,MAAM,UAAU,GAAK,MAAM,CAAC,cAAc,IAAM,CAAA,CAAA,CAAC,GAAI,MAAM,CAAC,UAAU,CAAE,CAAC,EAAE,CAAC,CAAE,CAAA,AAAC,AAAE;AAMjF,MAAM,WAAW,GAAG,CAAK,IAAU,GAAU,KAAK,CAAC,OAAO,CAAE,IAAI,CAAE,GAAG,IAAI,GAAG;QAAE,IAAI;KAAE;AAGpF,MAAM,WAAW,GAAG,CAAA,EAAE,GAAI,AAAC,CAAA,OAAO,EAAE,CAAA,AAAC,CAAC,CAAC,CAAC,IAAI,GAAG;AAE/C,SAAS,gBAAgB,CAAG,KAAW,EAAG;IAChD,wEAAwE;IACxE,OAAO,KAAK,CAAC,KAAK,CAAC,QAAQ,GAAI,KAAK,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,AAAC,CAAA;CACnE;;;ACxCD,OAAO,CAAC,cAAc,GAAG,SAAU,CAAC,EAAE;IACpC,OAAO,CAAC,IAAI,CAAC,CAAC,UAAU,GAAG,CAAC,GAAG;QAAC,OAAO,EAAE,CAAC;KAAC,CAAC;CAC7C,CAAC;AAEF,OAAO,CAAC,iBAAiB,GAAG,SAAU,CAAC,EAAE;IACvC,MAAM,CAAC,cAAc,CAAC,CAAC,EAAE,YAAY,EAAE;QAAC,KAAK,EAAE,IAAI;KAAC,CAAC,CAAC;CACvD,CAAC;AAEF,OAAO,CAAC,SAAS,GAAG,SAAU,MAAM,EAAE,IAAI,EAAE;IAC1C,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,SAAU,GAAG,EAAE;QACzC,IAAI,GAAG,KAAK,SAAS,IAAI,GAAG,KAAK,YAAY,IAAI,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,EACvE,OAAO;QAGT,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,GAAG,EAAE;YAC/B,UAAU,EAAE,IAAI;YAChB,GAAG,EAAE,WAAY;gBACf,OAAO,MAAM,CAAC,GAAG,CAAC,CAAC;aACpB;SACF,CAAC,CAAC;KACJ,CAAC,CAAC;IAEH,OAAO,IAAI,CAAC;CACb,CAAC;AAEF,OAAO,CAAC,MAAM,GAAG,SAAU,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE;IAC9C,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,QAAQ,EAAE;QACpC,UAAU,EAAE,IAAI;QAChB,GAAG,EAAE,GAAG;KACT,CAAC,CAAC;CACJ,CAAC;;;AC9BF;;AAEA,sDAAsD;AACtD,uDAAuD;AACvD,iDAAgB,WAAW,CAE1B;AAED,gDAAgB,UAAU,CAMzB;AAGD,uCAAgB,CAAC,CAyBhB,CAID,mDAAmD;CACnD,8BAA8B;CAC9B,mEAAmE;CACnE,uBAAuB;CACvB,yBAAyB;CACzB,qCAAqC;CACrC,4CAA4C;CAC5C,+BAA+B;CAC/B,2DAA2D;CAC3D,gEAAgE;CAChE,4DAA4D;CAC5D,iEAAiE;CACjE,8CAA8C;CAC9C,aAAa;CACb,MAAM;CACN,mDAAmD;CACnD,IAAI;;AA9DJ,iCAAuD;AAIhD,SAAS,WAAW,CAAG,IAAI,EAAE,KAAK,EAAE,GAAG,AAAC,EAAE,GAAG,AAAC,EAAS;IAC7D,OAAO;QAAE,IAAI,EAAE,IAAI;QAAE,KAAK,EAAE,KAAK;QAAE,GAAG,EAAE,GAAG;QAAE,IAAI,EAAE,GAAG;KAAE,CAAA;CACxD;AAEM,SAAS,UAAU,CAAG,KAAW,EAAG;IAC1C,OAAO;QACN,GAAG,KAAK;QACR,sCAAsC;QACtC,KAAK,EAAE;YAAE,GAAG,KAAK,CAAC,KAAK;SAAE;KACzB,CAAA;CACD;AAGM,SAAS,CAAC,CAAG,IAAI,EAAE,KAAK,EAAE,GAAG,QAAQ,EAAG;IAC9C,0BAA0B;IAC1B,+DAA+D;IAC/D,IAAI,SAAS,GAAO,EAAE;IACtB,IAAI,GAAG,EAAE,GAAG;IACZ,IAAM,IAAI,CAAC,IAAI,KAAK,CAAG;QACtB,MAAM,KAAK,GAAG,KAAK,CAAE,CAAC,CAAE;QACxB,wBAAwB;QACxB,IAAK,CAAC,IAAI,KAAK,EACd,GAAG,GAAG,KAAK;aACP,IAAK,CAAC,IAAI,KAAK,EACnB,GAAG,GAAG,KAAK;aAEP,IAAK,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,EAC5B,SAAS,CAAC,CAAC,CAAC,GAAG,KAAK;KACrB;IACD,2BAA2B;IAC3B,SAAS,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAE,CAAA,KAAK,GACvC,2DAA2D;QACzD;YAAC,GAAG;YAAE,GAAG;SAAC,CAAC,OAAO,CAAE,AAAC,CAAA,OAAO,KAAK,CAAA,AAAC,CAAC,CAAC,CAAC,CAAE,IAAI,EAAE,GAC7C,WAAW,CAAE,CAAA,GAAA,4BAAoB,CAAA,EAAE;YAAE,KAAK,EAAE,EAAE,GAAG,KAAK;SAAE,CAAC,GAEzD,KAAK,AACP,CAAC;IACF,OAAO,WAAW,CAAE,IAAI,EAAE,SAAS,EAAE,GAAG,EAAE,GAAG,CAAE,CAAA;CAC/C;;;AC1CD;;AAwBA,0GAA0G;AAE1G,sDAAsD;AACtD,6DAAgB,uBAAuB,CAYtC;AAoCD,gGAAgG;AAEhG,oDAAgB,cAAc,CAU7B;AAED,sDAAgB,gBAAgB,CAW/B;AAED,iEAAgB,2BAA2B,CAK1C;AA3GD,iCAIkB;AAuBX,SAAS,uBAAuB,CAAG,KAAoC,EAAqB;IAClG,OAAO;QACN,KAAK;QACL,WAAW,EAAE,gBAAgB,CAAE,KAAK,CAAC,KAAK,CAAE;QAC5C,QAAQ,EAAE,KAAK;QACf,SAAS,EAAE,KAAK;QAChB,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC,IAAI;QACrB,cAAc,EAAE,EAAE;QAClB,eAAe,EAAE,EAAE;QACnB,gBAAgB,EAAE,EAAE;QACpB,YAAY,EAAE,EAAE;KAChB,CAAA;CACD;AAgBD,SAAS,gBAAgB,CAAY,KAAY,EAAyB;IACzE,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,EAAE,EAAE;QAC3B,0DAA0D;QAC1D,GAAG,EAAG,MAAS,EAAE,QAAsB,EAAO;YAC7C,OAAS,QAAQ,IAAI,KAAK,GAAG,KAAK,CAAE,QAAQ,CAAE,GAAG,KAAK,CAAC,CAAE;SACzD;QACD,wBAAwB;QACxB,GAAG,IAAI;YAEN,MAAM,IAAI,KAAK,CAAC,CAAC,2EAA2E,CAAC,CAAC,CAAA;SAC9F;KACD,CAAC;IACF,OAAO;QACN,gDAAgD;QAChD,IAAI,KAAK,IAAI;YAAE,OAAO,KAAK,CAAU;SAAE;QACvC,yFAAyF;QACzF,GAAG,EAAG,QAAe,EAAG;YAAE,KAAK,GAAG,QAAQ;SAAE;KAC5C,CAAA;CACD;AAIM,SAAS,cAAc,CAAG,SAA2B,EAAG;IAC9D,+DAA+D;IAC/D,SAAS,CAAC,cAAc,CAAC,GAAG,CAAE,CAAA,OAAO,GAAI;QACxC,MAAM,aAAa,GAAG,OAAO,CAAC,KAAK,CAAE,SAAS,EAAE,EAAE,CAAE,AAAC;QACrD,IAAK,CAAA,GAAA,mBAAW,CAAA,CAAC,aAAa,CAAC,EAC9B,SAAS,CAAC,gBAAgB,CAAC,IAAI,CAAE,aAAa,CAAE;KACjD,CAAC;IACF,6CAA6C;IAC7C,SAAS,CAAC,cAAc,GAAG,EAAE;IAC7B,SAAS,CAAC,SAAS,GAAG,IAAI,CAAC;CAC3B;AAEM,SAAS,gBAAgB,CAAG,SAA2B,EAAG;IAChE,SAAS,CAAC,gBAAgB,CAAC,GAAG,CAAE,CAAA,CAAC,GAAI,CAAC,CAAC,KAAK,CAAE,SAAS,EAAE,EAAE,CAAE,CAAE;IAC/D,SAAS,CAAC,YAAY,CAAC,GAAG,CAAE,CAAA,CAAC,GAAI,CAAC,CAAC,OAAO,EAAE,CAAE;IAC9C,wEAAwE;IACxE,wBAAwB;IACxB,8BAA8B;IAC9B,OAAO,SAAS,CAAC,cAAc,CAAC;IAChC,OAAO,SAAS,CAAC,eAAe,CAAC;IACjC,OAAO,SAAS,CAAC,gBAAgB,CAAC;IAClC,OAAO,SAAS,CAAC,YAAY;IAC7B,SAAS,CAAC,SAAS,GAAG,KAAK,CAAC;CAC5B;AAEM,SAAS,2BAA2B,CAAG,IAAU,EAAE,OAAe,EAAG;IAC3E,IAAK,IAAI,CAAC,IAAI,IAAI,CAAA,GAAA,4BAAoB,CAAA,EAAG,OAAM;IAC/C,CAAA,GAAA,wBAAgB,CAAA,CAAE,IAAI,CAAE,CAAC,GAAG,CAAE,CAAA,CAAC,GAAI,CAAC,IAAI,2BAA2B,CAAC,CAAC,EAAE,OAAO,CAAC,CAAE;IACjF,IAAK,IAAI,CAAC,UAAU,EACnB,OAAO,GAAG,cAAc,CAAE,IAAI,CAAC,UAAU,CAAE,GAAG,gBAAgB,CAAE,IAAI,CAAC,UAAU,CAAE;CAClF;;;AC3GD;;AAKA,uFAAuF;AAEvF,4CAAgB,MAAM,CAOrB;AAiBD,yDAAgB,mBAAmB,CASlC,CAED,wGAAwG;CAExG,uEAAuE;CACvE,uEAAuE;CACvE,6CAA6C;CAC7C,8EAA8E;CAC9E,iFAAiF;CACjF,eAAe;CACf,eAAe;CACf,sBAAsB;CAEtB,wFAAwF;CAExF,iBAAiB;CACjB,uFAAuF;;AAxDvF,iCAAwF;AACxF,6BAA+E;AAC/E,2BAAoC;AAK7B,SAAS,MAAM,CAAG,QAAsB,EAAE,aAAyB,EAAG;IAC5E,qEAAqE;IACrE,8FAA8F;IAC9F,MAAM,IAAI,GAAG,CAAA,GAAA,gBAAW,CAAA,CAAE,CAAA,GAAA,4BAAoB,CAAA,EAAE;QAAE,QAAQ,EAAE,CAAA,GAAA,mBAAW,CAAA,CAAE,QAAQ,CAAE;KAAE,CAAC;IACtF,IAAI,CAAC,GAAG,GAAG,aAAa;IACxB,CAAA,GAAA,kBAAY,CAAA,CAAE,IAAI,EAAE,aAAa,CAAE,GAAA,mCAA6B,CAAE,CAAE;IACpE,aAAa,CAAE,GAAA,mCAA6B,CAAE,GAAG,IAAI;CACrD;AAED,6FAA6F;AAE7F,IAAI,kBAAkB,GAAuB,EAAE;AAC/C,SAAS,qBAAqB,GAAI;IACjC,IAAI,CAAC;IAEJ,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,iBAAiB,CAAC,yBAAyB,CAAC;IACpE,uDAAuD;IACvD,kBAAkB,CAAC,GAAG,CAAE,CAAA,SAAS,GAAI;QACpC,CAAA,GAAA,cAAQ,CAAA,CAAE,SAAS,CAAC,KAAK,EAAE,SAAS,CAAC,KAAK,CAAE;KAC5C,CAAC;IACF,kBAAkB,GAAG,EAAE;IACvB,CAAC,IAAI,CAAC,EAAE,CAAC;CACT;AAEM,SAAS,mBAAmB,CAAG,SAA2B,EAAG;IACnE,sCAAsC;IACtC,IAAK,kBAAkB,CAAC,MAAM,KAAK,CAAC,EACnC,CAAA,GAAA,kBAAU,CAAA,CAAE,qBAAqB,CAAE,CAAC;IACrC,iCAAiC;IACjC,IAAK,SAAS,CAAC,QAAQ,EAAG,OAAO;IACjC,SAAS,CAAC,QAAQ,GAAG,IAAI;IACzB,6CAA6C;IAC7C,kBAAkB,CAAC,IAAI,CAAE,SAAS,CAAE;CACpC;;;ACrCD;;AAEA,oDAAgB,cAAc,CAAiC;AAC/D,oDAAgB,cAAc,CAE7B;AAED,mGAAmG;AAEnG,uDAAgB,iBAAiB,CAQhC;AAnBD,iGAAiG;AAEjG,IAAI,kBAAkB,GAAG,KAAK,AAAC;AAExB,SAAS,cAAc,GAAI;IAAE,OAAO,kBAAkB,CAAA;CAAE;AACxD,SAAS,cAAc,CAAE,KAAa,EAAE;IAC9C,kBAAkB,GAAG,KAAK;CAC1B;AAIM,SAAS,iBAAiB,CAAG,OAAc,EAAG;IACpD,IAA8C,CAAC,kBAAkB,EAChE,OAAO,IAAM,EAAE,CAAC;IACjB,MAAM,KAAK,GAAG,WAAW,CAAC,GAAG,EAAE;IAC/B,OAAO,IAAM;QACZ,MAAM,KAAK,GAAG,CAAC,CAAG,CAAA,WAAW,CAAC,GAAG,EAAE,GAAG,KAAK,CAAA,AAAE;QAC7C,OAAO,CAAC,IAAI,CAAE,OAAO,EAAE,KAAK,GAAG,IAAI,GAAG,CAAC,EAAE,KAAK,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,KAAK,GAAC,IAAI,CAAC,CAAC,CAAC,CAAC;KACtE,CAAA;CACD;;;ACpBD;;AAmCA;;;;;GAKG,CACH,+CAAgB,SAAS,CAmBxB;AAuCD,2DAAgB,qBAAqB,CA+BpC;AASD,2DAAgB,qBAAqB,CA2CpC;AAtLD,wCAAkD;AAClD,iCAAuC;AAavC,MAAM,mBAAmB,GAAG,CAAU,YAAiC,GACtE,CAAA,GAAA,mBAAW,CAAA,CAAC,YAAY,CAAC,GAAG,AAAE,YAAY,EAAmB,GAAG,YAAY,AAAS,AACrF;AAED,MAAM,aAAa,GAAG,CAAU,YAAkB,EAAE,MAAqB,GACxE,CAAA,GAAA,mBAAW,CAAA,CAAC,MAAM,CAAC,GAAG,AAAC,MAAM,CAAyB,YAAY,CAAE,GAAG,MAAM,AAAS,AACtF;AAqBM,SAAS,SAAS,CAAW,YAAkC,EAAe;IACpF,yCAAyC;IACzC,IAAI,KAAK,GAAS,mBAAmB,CAAE,YAAY,CAAE;IACrD,oDAAoD;IACpD,6EAA6E;IAC7E,MAAM,SAAS,GAAG,CAAA,GAAA,cAAM,CAAA,EAAkB;IAC1C,MAAM,EAAE,QAAQ,CAAA,EAAE,GAAG,SAAS;IAC9B,OAAO,SAAS,CAAC,QAAQ,CAAC;IAC1B,iBAAiB;IACjB,OAAO;QACN,SAAS;QACT,QAAQ;QACR,GAAG,IAAI;YAAE,OAAO,KAAK,CAAA;SAAE;QACvB,GAAG,EAAG,QAAuB,EAAG;YAAE,KAAK,GAAG,aAAa,CAAC,KAAK,EAAE,QAAQ,CAAC;SAAE;QAC1E,OAAO,IAAI;YACV,SAAS,CAAC,KAAK,EAAE,CAAC;YAClB,KAAK,GAAG,IAAI,CAAC;SACb;KACD,CAAA;CACD;AAuCM,SAAS,qBAAqB,CACpC,YAAmC,EACnC,aAAoD,EAC3B;IACzB,yDAAyD;IACzD,iEAAiE;IACjE,+EAA+E;IAC/E,2EAA2E;IAC3E,MAAM,GAAG,GAAG,SAAS,CAAS,YAAY,CAAE,AAAC;IAC7C,OAAO;QACN,UAAU;QACV,SAAS,EAAE,GAAG,CAAC,SAAS;QACxB,OAAO,EAAE,GAAG,CAAC,OAAO;QACpB,IAAI,KAAK,IAAI;YAAE,OAAO,GAAG,CAAC,GAAG,EAAE,CAAA;SAAE;QACjC,MAAM,GAAG,EAAG,QAAuB,EAAG;YACrC,MAAM,QAAQ,GAAG,GAAG,CAAC,GAAG,EAAE,AAAC;YAC3B,QAAQ,GAAG,aAAa,CAAE,QAAQ,EAAE,QAAQ,CAAE;YAC9C,GAAG,CAAC,GAAG,CAAE,QAAQ,CAAE,CAAC;YACpB,IAAK,aAAa,EAAG;gBACpB,mBAAmB;gBACnB,MAAM,UAAU,GAAG,MAAM,aAAa,CAAE,QAAQ,EAAE,QAAQ,CAAE;gBAC5D,IAAK,UAAU,KAAK,IAAI,EAAG;oBAC1B,GAAG,CAAC,GAAG,CAAE,QAAQ,CAAE,CAAC;oBACpB,oBAAoB;oBACpB,OAAO;iBACP;aACD;YACD,oBAAoB;YACpB,GAAG,CAAC,QAAQ,CAAE,QAAQ,EAAE,QAAQ,CAAE,CAAC;SACnC;KACD,CAAA;CACD;AASM,SAAS,qBAAqB,CACpC,YAAmC,EACnC,aAAoD,EAC3B;IACzB,yDAAyD;IACzD,2EAA2E;IAC3E,MAAM,GAAG,GAAG,SAAS,CAAS,YAAY,CAAE,AAAC;IAC7C,IAAI,UAAU,GAAG,KAAK;IACtB,IAAI,kBAAkB,GAAG,KAAK;IAC9B,OAAO;QACN,UAAU;QACV,SAAS,EAAE,GAAG,CAAC,SAAS;QACxB,OAAO,EAAE,GAAG,CAAC,OAAO;QACpB,IAAI,KAAK,IAAI;YAAE,OAAO,GAAG,CAAC,GAAG,EAAE,CAAA;SAAE;QACjC,IAAI,UAAU,IAAI;YAAE,OAAO,UAAU,CAAA;SAAE;QACvC,IAAI,kBAAkB,IAAI;YAAE,OAAO,kBAAkB,CAAA;SAAE;QACvD,MAAM,GAAG,EAAG,QAAuB,EAAG;YACrC,4BAA4B;YAC5B,MAAM,QAAQ,GAAG,GAAG,CAAC,GAAG,EAAE,AAAC;YAC3B,QAAQ,GAAG,aAAa,CAAE,QAAQ,EAAE,QAAQ,CAAE;YAC9C,GAAG,CAAC,GAAG,CAAE,QAAQ,CAAE;YACnB,kEAAkE;YAClE,IAAK,aAAa,EAAG;gBACpB,IAAK,UAAU,EACd,kBAAkB,GAAG,IAAI;gBAC1B,UAAU,GAAG,IAAI,CAAC;gBAClB,MAAM,UAAU,GAAG,MAAM,aAAa,CAAE,QAAQ,EAAE,QAAQ,CAAE;gBAC5D,IAAK,UAAU,KAAK,IAAI,EAAG;oBAC1B,GAAG,CAAC,GAAG,CAAE,QAAQ,CAAE;oBACnB,UAAU,GAAG,KAAK;oBAClB,kBAAkB,GAAG,KAAK;oBAC1B,OAAO;iBACP;gBACD,UAAU,GAAG,KAAK;gBAClB,IAAK,kBAAkB,EAAG;oBACzB,kBAAkB,GAAG,KAAK;oBAC1B,OAAM;iBACN;aACD;YACD,sDAAsD;YACtD,GAAG,CAAC,QAAQ,CAAE,QAAQ,EAAE,QAAQ,CAAE;SAClC;KACD,CAAA;CACD;;;ACtLD;;AAAA,qDAAoC;AAApC,wBAAA,gBAAoC,UAAA;AACpC,gEAA0C;AAA1C,wBAAA,qBAA0C,UAAA;AAC1C,6DAAwC;AAAxC,wBAAA,oBAAwC,UAAA;;;ACExC;;AAJA,eAAe;AACf,mFAAmF;AACnF,2DAA2D;AAC3D,+FAA+F;AAC/F,4CAAgB,MAAM,CAoCrB;AApCM,SAAS,MAAM,GAAG;IACrB,6BAA6B;IAC7B,IAAI,UAAU,GAAG,EAAE,AAAC;IACpB,qCAAqC;IACrC,MAAM,MAAM,GAAG,CAAC,OAAO,GAAK,UAAU,GAAG,UAAU,CAAC,MAAM,CAAC,CAAA,CAAC,GAAI,CAAC,CAAC,CAAC,CAAC,KAAK,OAAO,CAAC,AAAC;IAClF,uDAAuD;IACvD,SAAS,GAAG,CAAC,OAAO,EAAE,IAAI,EAAE,UAAU,GAAG,KAAK,EAAE;QAC5C,eAAe;QACf,UAAU,CAAC,IAAI,CAAC;YAAC,OAAO;YAAE,IAAI;SAAC,CAAC,CAAC;QACjC,uEAAuE;QACvE,qDAAqD;QACrD,UAAU,IAAI,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,UAAU,GAAG,IAAI,CAAC,CAAC;QACjF,mDAAmD;QACnD,mDAAmD;QACnD,OAAO,IAAM,MAAM,CAAC,OAAO,CAAC,CAAC;KAChC;IACD,oBAAoB;IACpB,OAAO;QACH,gCAAgC;QAChC,GAAG,EAAC,OAAO,EAAE,UAAU,GAAG,KAAK,EAAE;YAC7B,OAAO,GAAG,CAAC,OAAO,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;SAC1C;QACD,qCAAqC;QACrC,IAAI,EAAC,OAAO,EAAE;YACV,OAAO,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;SAC7B;QACD,MAAM;QACN,QAAQ,EAAE,CAAI,GAAA,IAAI,GAAK,UAAU,CAAC,GAAG,CAAC,CAAA,QAAQ,GAAI;gBAC9C,oCAAoC;gBACpC,QAAQ,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;gBACnC,0BAA0B;gBAC1B,OAAO,QAAQ,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC;aAC/B,CAAC;QACF,KAAK,IAAG;YAAE,UAAU,GAAG,EAAE,CAAC;SAAE;QAC5B,IAAI,SAAS,IAAG;YAAE,OAAO,UAAU,CAAC,GAAG,CAAC,CAAA,CAAC,GAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAAE;KACxD,CAAC;CACL;kBACc,MAAM,CAAC;;;ACzCtB;;AACA,6FAA6F;AAC7F,iDAAgB,WAAW,CAuB1B;AAzBD,qDAA6C;AAEtC,SAAS,WAAW,CAAC,MAAM,GAAG,IAAI,EAAE,OAAO,GAAG,CAAA,GAAA,uBAAM,CAAA,EAAE,EAAE;IAC3D,OAAO;QACH,GAAG,OAAO;QACV,IAAI,KAAK,IAAG;YAAE,OAAO,MAAM,CAAC;SAAE;QAC9B,gCAAgC;QAChC,GAAG,EAAC,OAAO,EAAE,UAAU,GAAG,KAAK,EAAE;YAC7B,iFAAiF;YACjF,OAAO,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,UAAU,KAAK,IAAI,GAAG;gBAAC,MAAM;aAAC,GAAG,KAAK,CAAC,CAAC;SACvE;QACD,qCAAqC;QACrC,IAAI,EAAC,OAAO,EAAE;YACV,OAAO,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAChC;QACD,QAAQ,EAAC,KAAK,EAAE;YACZ,MAAM,GAAG,KAAK,CAAC;YACf,OAAO,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;SAClC;QACD,oCAAoC;QACpC,KAAK,IAAG;YACJ,OAAO,CAAC,KAAK,EAAE,CAAC;YAChB,MAAM,GAAG,IAAI,CAAC;SACjB;KACJ,CAAC;CACL;;;ACzBD;;AAMA;;;;;GAKG,CACH,+CAAgB,SAAS,CAmBxB;AACD;;;;;;GAMG,CACH,2DAAgB,qBAAqB,CAYpC;AACD,2DAAgB,qBAAqB,CAsBpC;AACD,2DAAgB,qBAAqB,CAoCpC;AA/GD,qDAA6C;AAC7C,SAAS,mBAAmB,CAAC,YAAY,EAAE;IACvC,OAAQ,OAAO,YAAY,KAAK,UAAU,GACpC,YAAY,EAAE,GACd,YAAY,CAAE;CACvB;AAOM,SAAS,SAAS,CAAC,YAAY,EAAE;IACpC,yCAAyC;IACzC,IAAI,KAAK,GAAG,mBAAmB,CAAC,YAAY,CAAC,AAAC;IAC9C,oDAAoD;IACpD,6EAA6E;IAC7E,MAAM,SAAS,GAAG,CAAA,GAAA,uBAAM,CAAA,EAAE,AAAC;IAC3B,MAAM,EAAE,QAAQ,CAAA,EAAE,GAAG,SAAS,AAAC;IAC/B,SAAS,CAAC,QAAQ,GAAG,IAAI,CAAC;IAC1B,iBAAiB;IACjB,OAAO;QACH,SAAS;QACT,QAAQ;QACR,GAAG,IAAG;YAAE,OAAO,KAAK,CAAC;SAAE;QACvB,GAAG,EAAC,QAAQ,EAAE;YAAE,KAAK,GAAG,QAAQ,CAAC;SAAE;QACnC,OAAO,IAAG;YACN,SAAS,CAAC,KAAK,EAAE,CAAC;YAClB,KAAK,GAAG,IAAI,CAAC;SAChB;KACJ,CAAC;CACL;AAQM,SAAS,qBAAqB,CAAC,YAAY,EAAE;IAChD,yDAAyD;IACzD,MAAM,EAAE,GAAG,CAAA,EAAE,GAAG,CAAA,EAAE,QAAQ,CAAA,EAAE,GAAG,GAAG,EAAE,GAAG,SAAS,CAAC,YAAY,CAAC,AAAC;IAC/D,OAAO;QACH,GAAG,GAAG;QACN,IAAI,KAAK,IAAG;YAAE,OAAO,GAAG,EAAE,CAAC;SAAE;QAC7B,GAAG,EAAC,QAAQ,EAAE;YACV,MAAM,QAAQ,GAAG,GAAG,EAAE,AAAC;YACvB,GAAG,CAAC,QAAQ,CAAC,CAAC;YACd,QAAQ,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;SAChC;KACJ,CAAC;CACL;AACM,SAAS,qBAAqB,CAAC,YAAY,EAAE,aAAa,EAAE;IAC/D,yDAAyD;IACzD,MAAM,EAAE,GAAG,CAAA,EAAE,GAAG,CAAA,EAAE,QAAQ,CAAA,EAAE,GAAG,GAAG,EAAE,GAAG,SAAS,CAAC,YAAY,CAAC,AAAC;IAC/D,OAAO;QACH,GAAG,GAAG;QACN,IAAI,KAAK,IAAG;YAAE,OAAO,GAAG,EAAE,CAAC;SAAE;QAC7B,MAAM,GAAG,EAAC,QAAQ,EAAE;YAChB,MAAM,QAAQ,GAAG,GAAG,EAAE,AAAC;YACvB,GAAG,CAAC,QAAQ,CAAC,CAAC;YACd,IAAI,aAAa,EAAE;gBACf,mBAAmB;gBACnB,MAAM,UAAU,GAAG,MAAM,aAAa,CAAC,QAAQ,EAAE,QAAQ,CAAC,AAAC;gBAC3D,IAAI,UAAU,KAAK,IAAI,EAAE;oBACrB,GAAG,CAAC,QAAQ,CAAC,CAAC;oBACd,oBAAoB;oBACpB,OAAO;iBACV;aACJ;YACD,oBAAoB;YACpB,QAAQ,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;SAChC;KACJ,CAAC;CACL;AACM,SAAS,qBAAqB,CAAC,YAAY,EAAE,aAAa,EAAE;IAC/D,yDAAyD;IACzD,MAAM,EAAE,GAAG,CAAA,EAAE,GAAG,CAAA,EAAE,QAAQ,CAAA,EAAE,GAAG,GAAG,EAAE,GAAG,SAAS,CAAC,YAAY,CAAC,AAAC;IAC/D,IAAI,UAAU,GAAG,KAAK,AAAC;IACvB,IAAI,kBAAkB,GAAG,KAAK,AAAC;IAC/B,OAAO;QACH,GAAG,GAAG;QACN,IAAI,KAAK,IAAG;YAAE,OAAO,GAAG,EAAE,CAAC;SAAE;QAC7B,IAAI,UAAU,IAAG;YAAE,OAAO,UAAU,CAAC;SAAE;QACvC,IAAI,kBAAkB,IAAG;YAAE,OAAO,kBAAkB,CAAC;SAAE;QACvD,MAAM,GAAG,EAAC,QAAQ,EAAE;YAChB,4BAA4B;YAC5B,MAAM,QAAQ,GAAG,GAAG,EAAE,AAAC;YACvB,GAAG,CAAC,QAAQ,CAAC,CAAC;YACd,kEAAkE;YAClE,IAAI,aAAa,EAAE;gBACf,IAAI,UAAU,EACV,kBAAkB,GAAG,IAAI,CAAC;gBAC9B,UAAU,GAAG,IAAI,CAAC;gBAClB,MAAM,UAAU,GAAG,MAAM,aAAa,CAAC,QAAQ,EAAE,QAAQ,CAAC,AAAC;gBAC3D,IAAI,UAAU,KAAK,IAAI,EAAE;oBACrB,GAAG,CAAC,QAAQ,CAAC,CAAC;oBACd,UAAU,GAAG,KAAK,CAAC;oBACnB,kBAAkB,GAAG,KAAK,CAAC;oBAC3B,OAAO;iBACV;gBACD,UAAU,GAAG,KAAK,CAAC;gBACnB,IAAI,kBAAkB,EAAE;oBACpB,kBAAkB,GAAG,KAAK,CAAC;oBAC3B,OAAO;iBACV;aACJ;YACD,sDAAsD;YACtD,QAAQ,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;SAChC;KACJ,CAAC;CACL;;;AC/GD;;AAoBA,yCAAgB,GAAG,CAalB;AAkBD,0CAAgB,IAAI,CAyBnB,CAED,sEAAsE;CACtE,6CAA6C;CAC7C,4BAA4B;CAC5B,EAAE;CACF,IAAI;;AA9DG,SAAS,GAAG,GAGS;IAC3B,MAAM,KAAK,GAAkC;QAC5C,SAAS,EAAE,IAAI;QACf,GAAG,EAAE,IAAI;QACT,YAAY,EAAG,KAAuC,EAAG;YACxD,KAAK,CAAC,GAAG,GAAK,KAAK,CAAC,GAAG,AAAQ,CAAC;YAChC,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC,UAAU,AAAc,CAAC;SACjD;KACD;IACD,OAAO,KAAK,CAAoC;CAChD;AAkBM,SAAS,IAAI,GAGS;IAC5B,MAAM,KAAK,GAAmC;QAC7C,IAAI,EAAE,EAAE;QACR,YAAY,EAAG,KAAY,EAAE,KAAuC,EAAG;YACtE,SAAS;YACT,IAAK,KAAK,IAAI,IAAI,EAAG;gBACpB,OAAO,KAAK,CAAC,IAAI,CAAE,KAAK,CAAE;gBAC1B,KAAK,CAAC,IAAI,CAAC,MAAM,EAAG;YACrB,SAAS;aACR,MAAM,IAAK,KAAK,IAAI,KAAK,CAAC,IAAI,EAAG;gBACjC,KAAK,CAAC,IAAI,CAAE,KAAK,CAAE,CAAC,SAAS,GAAG,KAAK,CAAC,UAAU,AAAc,CAAC;gBAC/D,KAAK,CAAC,IAAI,CAAE,KAAK,CAAE,CAAC,GAAG,GAAM,KAAK,CAAC,GAAG,AAAQ,CAAC;YAChD,SAAS;aACR,MACA,KAAK,CAAC,IAAI,CAAE,KAAK,CAAE,GAAG;gBACrB,GAAG,EAAK,KAAK,CAAC,GAAG;gBACjB,SAAS,EAAG,KAAK,CAAC,UAAU;aAC5B;SAEF;KACD;IACD,OAAO,KAAK,CAAqC;CACjD;;;AC5ED;;AAGA,gGAAgG;AAEhG,6CAAgB,OAAO,CAGtB;AAED,+CAAgB,SAAS,CAGxB;AAQD,6CAAgB,OAAO,CAwCtB;AA7DD,6BAA4C;AAC5C,iCAAuE;AAIhE,SAAS,OAAO,CAAG,OAAoB,EAAG;IAChD,6DAA6D;IAC7D,CAAA,GAAA,wBAAkB,CAAA,EAAE,CAAC,cAAc,CAAC,IAAI,CAAE,OAAO,CAAE;CACnD;AAEM,SAAS,SAAS,CAAG,OAAwB,EAAG;IACtD,6DAA6D;IAC7D,CAAA,GAAA,wBAAkB,CAAA,EAAE,CAAC,gBAAgB,CAAC,IAAI,CAAE,OAAO,CAAE;CACrD;AAQM,SAAS,OAAO,CAAY,aAAwD,EAAE,cAAoC,EAAG;IACnI,MAAM,SAAS,GAAG,CAAA,GAAA,wBAAkB,CAAA,EAAE;IACtC,mEAAmE;IACnE,wEAAwE;IACxE,IAAK,CAAC,cAAc,EAAG;QACtB,SAAS,CAAC,eAAe,CAAC,IAAI,CAAE,aAAa,CAAE,CAAC;QAChD,OAAO;KACP;IACD,kBAAkB;IAClB,IAAI,KAAK,GAAG,AAAC,aAAa,EAA4B;IACtD,kCAAkC;IAClC,IAAI,sBAAsB,AAAiB;IAC3C,qCAAqC;IACrC,SAAS,WAAW,CAAG,QAAe,EAAG;QACxC,oDAAoD;QACpD,sBAAsB,IAAI,sBAAsB,CAAE,QAAQ,CAAE,CAAC;QAC7D,6CAA6C;QAC7C,MAAM,aAAa,GAAG,cAAc,CAAE,KAAK,EAAE,QAAQ,CAAE;QACvD,wDAAwD;QACxD,sBAAsB,GACrB,CAAA,GAAA,mBAAW,CAAA,CAAC,aAAa,CAAC,GACxB,aAAa,GACb,IAAI,AACN;KACD;IACD,gCAAgC;IAChC,IAAI,WAAW,GAAG,IAAI;IACtB,SAAS,CAAC,eAAe,CAAC,IAAI,CAAE,IAAM;QACrC,yCAAyC;QACzC,IAAK,WAAW,EAAG;YAClB,WAAW,CAAE,IAAI,CAAE,CAAC;YACpB,WAAW,GAAG,KAAK,CAAC;SACpB,MAAM;YACN,4BAA4B;YAC5B,MAAM,QAAQ,GAAG,KAAK,AAAC;YACvB,KAAK,GAAG,AAAE,aAAa,EAA6B;YACpD,IAAI,QAAQ,IAAI,KAAK,EACpB,WAAW,CAAE,QAAQ,CAAE;SACxB;KACD,CAAC;CACF;;;AC7DD;;AA0DA,kDAAgB,YAAY,CAM3B;AAhED,yCAA0D;AAC1D,4CAAiG;AASjG,SAAS,aAAa,GAAU;IAC/B,OAAO;QACN,SAAS,EAAG,CAAA,GAAA,uBAAU,CAAA,CAAE,CAAA,GAAA,0BAAa,CAAA,CAAE;QACvC,QAAQ,EAAG,CAAA,GAAA,uBAAU,CAAA,CAAE,CAAA,GAAA,yBAAY,CAAA,CAAE;QACrC,OAAO,EAAI,CAAA,GAAA,wBAAW,CAAA,EAAE;QACxB,EAAE,EAAK,CAAA,GAAA,sBAAS,CAAA,EAAE;KAClB,CAAA;CACD;AAQD,SAAS,aAAa,CAAG,KAAyB,EAAG;IAEpD,oEAAoE;IAEpE,mCAAmC;IACnC,uDAAuD;IACvD,CAAA,GAAA,eAAO,CAAA,CAAE,IAAM,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,CAAA,OAAO,GAAI;QAC7C,OAAO,CAAC,GAAG,CAAC,CAAC,kBAAkB,EAAE,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,OAAO,GAAG,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC;KAC3F,CAAC;IAEF,mDAAmD;IACnD,gEAAgE;IAChE,CAAA,GAAA,eAAO,CAAA,CAAE,IAAM,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,CAAA,KAAK,GAAI;QACtC,OAAO,CAAC,GAAG,CAAC,CAAC,0BAA0B,EAAE,KAAK,CAAC,cAAc,CAAC,CAAC;QAC/D,OAAO,CAAA,KAAK,GAAI;YACf,OAAO,CAAC,GAAG,CAAC,CAAC,6BAA6B,EAAE,KAAK,CAAC,UAAU,CAAC,CAAC;SAC9D,CAAA;KACD,CAAC;IAEF,2DAA2D;IAC3D,sFAAsF;IACtF,MAAM,IAAI,GAAG,CAAA,GAAA,WAAG,CAAA,EAAE;IAClB,MAAM,KAAK,GAAG,CAAA,GAAA,WAAG,CAAA,EAAE;IACnB,CAAA,GAAA,eAAO,CAAA,CAAC,IAAM;QACb,OAAO,CAAC,GAAG,CAAC,oCAAoC,EAAE,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;KAChG,CAAC;IAEF,OAAO,kBAAM,eAAC,KAAG;YAAC,GAAG,EAAG,IAAI;YAAG,KAAK,EAAC,eAAe;;;;;;;WAAC,QAC9C,EAAE,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,GAAC,EAAE,KAAK,CAAC,IAAI,CAAC,QAAQ,gBACpD,eAAC,KAAG;YAAC,GAAG,EAAE,CAAC,4BAA4B,EAAE,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YAAE,GAAG,EAAG,KAAK;;;;;;;UAAK,CACrE,CAAA;CACN;AAEM,SAAS,YAAY,GAAI;IAC/B,MAAM,WAAW,GAAG,CAAA,GAAA,aAAK,CAAA,CAAS,aAAa,CAAE;IACjD,OAAO,kBAAM,eAAC,KAAG;;;;;;;yBAChB,eAAC,QAAM;YAAC,OAAO,EAAG,CAAA,CAAC,GAAI,WAAW,CAAC,GAAG,CAAE,aAAa,CAAE;;;;;;;WAAG,aAAW,CAAS,gBAC9E,eAAC,aAAa;YAAC,IAAI,EAAG,WAAW,CAAC,KAAK;;;;;;;UAAK,CACvC,CAAA;CACN;;;AC/DD;;2CAAa,KAAK;+CACL,SAAS;gDACT,UAAU;0CACV,IAAI;iDACJ,WAAW;8CAEX,QAAQ;+CACR,SAAS;mDACT,aAAa;kDACb,YAAY;AATlB,MAAM,KAAK,GAAG,CAAC,CAAQ,GAAK,AAAC,CAAA,CAAC,CAAC,CAAC,CAAA,CAAE,QAAQ,CAAC,EAAE,CAAC;AAC9C,MAAM,SAAS,GAAG,IAAM,CAAC,EAAE,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,SAAS,CAAC,CAAC,CAAC,AAAC;AACnF,MAAM,UAAU,GAAG,CAAgB,KAAS,GAAO,KAAK,CAAE,CAAC,CAAE,CAAA,IAAI,CAAC,MAAM,EAAE,GAAG,KAAK,CAAC,MAAM,CAAA,AAAC,CAAE;AAC5F,MAAM,IAAI,GAAG,CAAC,GAAU,GAAK,CAAC,CAAE,CAAA,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,CAAA,AAAC;AACpD,MAAM,WAAW,GAAG,CAAC,SAAS,GAAG,EAAE,GAAM,IAAI,CAAC,MAAM,EAAE,GAAG,SAAS,AAAC;AAEnE,MAAM,QAAQ,GAAG;IAAC,QAAQ;IAAE,SAAS;IAAE,QAAQ;IAAE,OAAO;IAAE,SAAS;IAAE,KAAK;IAAE,OAAO;IAAE,SAAS;CAAC;AAC/F,MAAM,SAAS,GAAG;IAAC,KAAK;IAAE,MAAM;IAAE,QAAQ;IAAE,QAAQ;IAAE,QAAQ;IAAE,OAAO;IAAE,OAAO;IAAE,OAAO;CAAC;AAC1F,MAAM,aAAa,GAAG;IAAC,QAAQ;IAAE,SAAS;IAAE,MAAM;IAAE,QAAQ;CAAC;AAC7D,MAAM,YAAY,GAAG;IAAC,QAAQ;IAAE,OAAO;IAAE,WAAW;IAAE,MAAM;CAAC","sources":["node_modules/@parcel/runtime-browser-hmr/lib/runtime-570141b2eeed68ee.js","demos/1-props-demo/index.tsx","src/reflex/index.ts","src/reflex/state.ts","src/reflex/diff.ts","src/reflex/common.ts","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","src/reflex/jsx.ts","src/reflex/component.ts","src/reflex/render.ts","src/reflex/debug.ts","src/reflex/observable.ts","node_modules/@zouloux/signal/dist/index.es2020.mjs","node_modules/@zouloux/signal/dist/signal.es2020.mjs","node_modules/@zouloux/signal/dist/state-signal.es2020.mjs","node_modules/@zouloux/signal/dist/observable.es2020.mjs","src/reflex/ref.ts","src/reflex/lifecycle.ts","demos/1-props-demo/PropsDemoApp.tsx","demos/demoHelpers.ts"],"sourcesContent":["var HMR_HOST = null;var HMR_PORT = null;var HMR_SECURE = false;var HMR_ENV_HASH = \"d6ea1d42532a7575\";module.bundle.HMR_BUNDLE_ID = \"71cc1f91253397d1\";\"use strict\";\n\n/* global HMR_HOST, HMR_PORT, HMR_ENV_HASH, HMR_SECURE, chrome, browser, globalThis, __parcel__import__, __parcel__importScripts__, ServiceWorkerGlobalScope */\n\n/*::\nimport type {\n  HMRAsset,\n  HMRMessage,\n} from '@parcel/reporter-dev-server/src/HMRServer.js';\ninterface ParcelRequire {\n  (string): mixed;\n  cache: {|[string]: ParcelModule|};\n  hotData: mixed;\n  Module: any;\n  parent: ?ParcelRequire;\n  isParcelRequire: true;\n  modules: {|[string]: [Function, {|[string]: string|}]|};\n  HMR_BUNDLE_ID: string;\n  root: ParcelRequire;\n}\ninterface ParcelModule {\n  hot: {|\n    data: mixed,\n    accept(cb: (Function) => void): void,\n    dispose(cb: (mixed) => void): void,\n    // accept(deps: Array<string> | string, cb: (Function) => void): void,\n    // decline(): void,\n    _acceptCallbacks: Array<(Function) => void>,\n    _disposeCallbacks: Array<(mixed) => void>,\n  |};\n}\ninterface ExtensionContext {\n  runtime: {|\n    reload(): void,\n    getURL(url: string): string;\n    getManifest(): {manifest_version: number, ...};\n  |};\n}\ndeclare var module: {bundle: ParcelRequire, ...};\ndeclare var HMR_HOST: string;\ndeclare var HMR_PORT: string;\ndeclare var HMR_ENV_HASH: string;\ndeclare var HMR_SECURE: boolean;\ndeclare var chrome: ExtensionContext;\ndeclare var browser: ExtensionContext;\ndeclare var __parcel__import__: (string) => Promise<void>;\ndeclare var __parcel__importScripts__: (string) => Promise<void>;\ndeclare var globalThis: typeof self;\ndeclare var ServiceWorkerGlobalScope: Object;\n*/\nvar OVERLAY_ID = '__parcel__error__overlay__';\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n  module.bundle.hotData = undefined;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets\n/*: {|[string]: boolean|} */\n, acceptedAssets\n/*: {|[string]: boolean|} */\n, assetsToAccept\n/*: Array<[ParcelRequire, string]> */\n;\n\nfunction getHostname() {\n  return HMR_HOST || (location.protocol.indexOf('http') === 0 ? location.hostname : 'localhost');\n}\n\nfunction getPort() {\n  return HMR_PORT || location.port;\n} // eslint-disable-next-line no-redeclare\n\n\nvar parent = module.bundle.parent;\n\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = getHostname();\n  var port = getPort();\n  var protocol = HMR_SECURE || location.protocol == 'https:' && !/localhost|127.0.0.1|0.0.0.0/.test(hostname) ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + (port ? ':' + port : '') + '/'); // Web extension context\n\n  var extCtx = typeof chrome === 'undefined' ? typeof browser === 'undefined' ? null : browser : chrome; // Safari doesn't support sourceURL in error stacks.\n  // eval may also be disabled via CSP, so do a quick check.\n\n  var supportsSourceURL = false;\n\n  try {\n    (0, eval)('throw new Error(\"test\"); //# sourceURL=test.js');\n  } catch (err) {\n    supportsSourceURL = err.stack.includes('test.js');\n  } // $FlowFixMe\n\n\n  ws.onmessage = async function (event\n  /*: {data: string, ...} */\n  ) {\n    checkedAssets = {}\n    /*: {|[string]: boolean|} */\n    ;\n    acceptedAssets = {}\n    /*: {|[string]: boolean|} */\n    ;\n    assetsToAccept = [];\n    var data\n    /*: HMRMessage */\n    = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      // Remove error overlay if there is one\n      if (typeof document !== 'undefined') {\n        removeErrorOverlay();\n      }\n\n      let assets = data.assets.filter(asset => asset.envHash === HMR_ENV_HASH); // Handle HMR Update\n\n      let handled = assets.every(asset => {\n        return asset.type === 'css' || asset.type === 'js' && hmrAcceptCheck(module.bundle.root, asset.id, asset.depsByBundle);\n      });\n\n      if (handled) {\n        console.clear(); // Dispatch custom event so other runtimes (e.g React Refresh) are aware.\n\n        if (typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n          window.dispatchEvent(new CustomEvent('parcelhmraccept'));\n        }\n\n        await hmrApplyUpdates(assets);\n\n        for (var i = 0; i < assetsToAccept.length; i++) {\n          var id = assetsToAccept[i][1];\n\n          if (!acceptedAssets[id]) {\n            hmrAcceptRun(assetsToAccept[i][0], id);\n          }\n        }\n      } else fullReload();\n    }\n\n    if (data.type === 'error') {\n      // Log parcel errors to console\n      for (let ansiDiagnostic of data.diagnostics.ansi) {\n        let stack = ansiDiagnostic.codeframe ? ansiDiagnostic.codeframe : ansiDiagnostic.stack;\n        console.error('🚨 [parcel]: ' + ansiDiagnostic.message + '\\n' + stack + '\\n\\n' + ansiDiagnostic.hints.join('\\n'));\n      }\n\n      if (typeof document !== 'undefined') {\n        // Render the fancy html overlay\n        removeErrorOverlay();\n        var overlay = createErrorOverlay(data.diagnostics.html); // $FlowFixMe\n\n        document.body.appendChild(overlay);\n      }\n    }\n  };\n\n  ws.onerror = function (e) {\n    console.error(e.message);\n  };\n\n  ws.onclose = function () {\n    console.warn('[parcel] 🚨 Connection to the HMR server was lost');\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n\n  if (overlay) {\n    overlay.remove();\n    console.log('[parcel] ✨ Error resolved');\n  }\n}\n\nfunction createErrorOverlay(diagnostics) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n  let errorHTML = '<div style=\"background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;\">';\n\n  for (let diagnostic of diagnostics) {\n    let stack = diagnostic.frames.length ? diagnostic.frames.reduce((p, frame) => {\n      return `${p}\n<a href=\"/__parcel_launch_editor?file=${encodeURIComponent(frame.location)}\" style=\"text-decoration: underline; color: #888\" onclick=\"fetch(this.href); return false\">${frame.location}</a>\n${frame.code}`;\n    }, '') : diagnostic.stack;\n    errorHTML += `\n      <div>\n        <div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">\n          🚨 ${diagnostic.message}\n        </div>\n        <pre>${stack}</pre>\n        <div>\n          ${diagnostic.hints.map(hint => '<div>💡 ' + hint + '</div>').join('')}\n        </div>\n        ${diagnostic.documentation ? `<div>📝 <a style=\"color: violet\" href=\"${diagnostic.documentation}\" target=\"_blank\">Learn more</a></div>` : ''}\n      </div>\n    `;\n  }\n\n  errorHTML += '</div>';\n  overlay.innerHTML = errorHTML;\n  return overlay;\n}\n\nfunction fullReload() {\n  if ('reload' in location) {\n    location.reload();\n  } else if (extCtx && extCtx.runtime && extCtx.runtime.reload) {\n    extCtx.runtime.reload();\n  }\n}\n\nfunction getParents(bundle, id)\n/*: Array<[ParcelRequire, string]> */\n{\n  var modules = bundle.modules;\n\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n\n      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {\n        parents.push([bundle, k]);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n\n  newLink.onload = function () {\n    if (link.parentNode !== null) {\n      // $FlowFixMe\n      link.parentNode.removeChild(link);\n    }\n  };\n\n  newLink.setAttribute('href', // $FlowFixMe\n  link.getAttribute('href').split('?')[0] + '?' + Date.now()); // $FlowFixMe\n\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\n\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n\n    for (var i = 0; i < links.length; i++) {\n      // $FlowFixMe[incompatible-type]\n      var href\n      /*: string */\n      = links[i].getAttribute('href');\n      var hostname = getHostname();\n      var servedFromHMRServer = hostname === 'localhost' ? new RegExp('^(https?:\\\\/\\\\/(0.0.0.0|127.0.0.1)|localhost):' + getPort()).test(href) : href.indexOf(hostname + ':' + getPort());\n      var absolute = /^https?:\\/\\//i.test(href) && href.indexOf(location.origin) !== 0 && !servedFromHMRServer;\n\n      if (!absolute) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nfunction hmrDownload(asset) {\n  if (asset.type === 'js') {\n    if (typeof document !== 'undefined') {\n      let script = document.createElement('script');\n      script.src = asset.url + '?t=' + Date.now();\n\n      if (asset.outputFormat === 'esmodule') {\n        script.type = 'module';\n      }\n\n      return new Promise((resolve, reject) => {\n        var _document$head;\n\n        script.onload = () => resolve(script);\n\n        script.onerror = reject;\n        (_document$head = document.head) === null || _document$head === void 0 ? void 0 : _document$head.appendChild(script);\n      });\n    } else if (typeof importScripts === 'function') {\n      // Worker scripts\n      if (asset.outputFormat === 'esmodule') {\n        return __parcel__import__(asset.url + '?t=' + Date.now());\n      } else {\n        return new Promise((resolve, reject) => {\n          try {\n            __parcel__importScripts__(asset.url + '?t=' + Date.now());\n\n            resolve();\n          } catch (err) {\n            reject(err);\n          }\n        });\n      }\n    }\n  }\n}\n\nasync function hmrApplyUpdates(assets) {\n  global.parcelHotUpdate = Object.create(null);\n  let scriptsToRemove;\n\n  try {\n    // If sourceURL comments aren't supported in eval, we need to load\n    // the update from the dev server over HTTP so that stack traces\n    // are correct in errors/logs. This is much slower than eval, so\n    // we only do it if needed (currently just Safari).\n    // https://bugs.webkit.org/show_bug.cgi?id=137297\n    // This path is also taken if a CSP disallows eval.\n    if (!supportsSourceURL) {\n      let promises = assets.map(asset => {\n        var _hmrDownload;\n\n        return (_hmrDownload = hmrDownload(asset)) === null || _hmrDownload === void 0 ? void 0 : _hmrDownload.catch(err => {\n          // Web extension bugfix for Chromium\n          // https://bugs.chromium.org/p/chromium/issues/detail?id=1255412#c12\n          if (extCtx && extCtx.runtime && extCtx.runtime.getManifest().manifest_version == 3) {\n            if (typeof ServiceWorkerGlobalScope != 'undefined' && global instanceof ServiceWorkerGlobalScope) {\n              extCtx.runtime.reload();\n              return;\n            }\n\n            asset.url = extCtx.runtime.getURL('/__parcel_hmr_proxy__?url=' + encodeURIComponent(asset.url + '?t=' + Date.now()));\n            return hmrDownload(asset);\n          }\n\n          throw err;\n        });\n      });\n      scriptsToRemove = await Promise.all(promises);\n    }\n\n    assets.forEach(function (asset) {\n      hmrApply(module.bundle.root, asset);\n    });\n  } finally {\n    delete global.parcelHotUpdate;\n\n    if (scriptsToRemove) {\n      scriptsToRemove.forEach(script => {\n        if (script) {\n          var _document$head2;\n\n          (_document$head2 = document.head) === null || _document$head2 === void 0 ? void 0 : _document$head2.removeChild(script);\n        }\n      });\n    }\n  }\n}\n\nfunction hmrApply(bundle\n/*: ParcelRequire */\n, asset\n/*:  HMRAsset */\n) {\n  var modules = bundle.modules;\n\n  if (!modules) {\n    return;\n  }\n\n  if (asset.type === 'css') {\n    reloadCSS();\n  } else if (asset.type === 'js') {\n    let deps = asset.depsByBundle[bundle.HMR_BUNDLE_ID];\n\n    if (deps) {\n      if (modules[asset.id]) {\n        // Remove dependencies that are removed and will become orphaned.\n        // This is necessary so that if the asset is added back again, the cache is gone, and we prevent a full page reload.\n        let oldDeps = modules[asset.id][1];\n\n        for (let dep in oldDeps) {\n          if (!deps[dep] || deps[dep] !== oldDeps[dep]) {\n            let id = oldDeps[dep];\n            let parents = getParents(module.bundle.root, id);\n\n            if (parents.length === 1) {\n              hmrDelete(module.bundle.root, id);\n            }\n          }\n        }\n      }\n\n      if (supportsSourceURL) {\n        // Global eval. We would use `new Function` here but browser\n        // support for source maps is better with eval.\n        (0, eval)(asset.output);\n      } // $FlowFixMe\n\n\n      let fn = global.parcelHotUpdate[asset.id];\n      modules[asset.id] = [fn, deps];\n    } else if (bundle.parent) {\n      hmrApply(bundle.parent, asset);\n    }\n  }\n}\n\nfunction hmrDelete(bundle, id) {\n  let modules = bundle.modules;\n\n  if (!modules) {\n    return;\n  }\n\n  if (modules[id]) {\n    // Collect dependencies that will become orphaned when this module is deleted.\n    let deps = modules[id][1];\n    let orphans = [];\n\n    for (let dep in deps) {\n      let parents = getParents(module.bundle.root, deps[dep]);\n\n      if (parents.length === 1) {\n        orphans.push(deps[dep]);\n      }\n    } // Delete the module. This must be done before deleting dependencies in case of circular dependencies.\n\n\n    delete modules[id];\n    delete bundle.cache[id]; // Now delete the orphans.\n\n    orphans.forEach(id => {\n      hmrDelete(module.bundle.root, id);\n    });\n  } else if (bundle.parent) {\n    hmrDelete(bundle.parent, id);\n  }\n}\n\nfunction hmrAcceptCheck(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n, depsByBundle\n/*: ?{ [string]: { [string]: string } }*/\n) {\n  if (hmrAcceptCheckOne(bundle, id, depsByBundle)) {\n    return true;\n  } // Traverse parents breadth first. All possible ancestries must accept the HMR update, or we'll reload.\n\n\n  let parents = getParents(module.bundle.root, id);\n  let accepted = false;\n\n  while (parents.length > 0) {\n    let v = parents.shift();\n    let a = hmrAcceptCheckOne(v[0], v[1], null);\n\n    if (a) {\n      // If this parent accepts, stop traversing upward, but still consider siblings.\n      accepted = true;\n    } else {\n      // Otherwise, queue the parents in the next level upward.\n      let p = getParents(module.bundle.root, v[1]);\n\n      if (p.length === 0) {\n        // If there are no parents, then we've reached an entry without accepting. Reload.\n        accepted = false;\n        break;\n      }\n\n      parents.push(...p);\n    }\n  }\n\n  return accepted;\n}\n\nfunction hmrAcceptCheckOne(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n, depsByBundle\n/*: ?{ [string]: { [string]: string } }*/\n) {\n  var modules = bundle.modules;\n\n  if (!modules) {\n    return;\n  }\n\n  if (depsByBundle && !depsByBundle[bundle.HMR_BUNDLE_ID]) {\n    // If we reached the root bundle without finding where the asset should go,\n    // there's nothing to do. Mark as \"accepted\" so we don't reload the page.\n    if (!bundle.parent) {\n      return true;\n    }\n\n    return hmrAcceptCheck(bundle.parent, id, depsByBundle);\n  }\n\n  if (checkedAssets[id]) {\n    return true;\n  }\n\n  checkedAssets[id] = true;\n  var cached = bundle.cache[id];\n  assetsToAccept.push([bundle, id]);\n\n  if (!cached || cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n}\n\nfunction hmrAcceptRun(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n\n  if (cached && cached.hot) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n  cached = bundle.cache[id];\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      var assetsToAlsoAccept = cb(function () {\n        return getParents(module.bundle.root, id);\n      });\n\n      if (assetsToAlsoAccept && assetsToAccept.length) {\n        // $FlowFixMe[method-unbinding]\n        assetsToAccept.push.apply(assetsToAccept, assetsToAlsoAccept);\n      }\n    });\n  }\n\n  acceptedAssets[id] = true;\n}","import { h, render } from \"../../src/reflex\";\nimport { trackPerformances, setReflexDebug } from \"../../src/reflex/debug\";\nimport { PropsDemoApp } from \"./PropsDemoApp\";\n\n// -----------------------------------------------------------------------------\n\nsetReflexDebug( true )\n\nexport function init () {\n\tconst p = trackPerformances(\"Root rendering\")\n\trender( <PropsDemoApp />, document.body )\n\tp();\n}\n\ninit();\n","/// <reference lib=\"dom\" />\n// ----------------------------------------------------------------------------- IMPORT / EXPORT\n\n/**\n * REFLEX JS\n *\n * - Reflex Core\n * \t\t- Core\n * \t\t- Polyfills\n * \t\t- Signal + Observer\n * \t\t- YADL\n * \t\t- Utils\n * - Reflex Components\n * \t\t- Reflex View (vdom + web components)\n * \t\t- Reflex Store\n * \t\t\t- Regular store / Async store or one big store well-made\n * \t\t- Reflex Router\n * \t\t\t- Based on Reflex Store\n * \t\t- Reflex Tween ?\n *\t\t- Reflex Toolkit\n *\t\t\t- Hooks\n *\t\t\t- Responsive\n *\t\t\t- Inputs\n *\t\t\t- Cursor\n *\t\t\t- Sound\n *\t\t\t- Viewport\n *\t\t- Reflex UI Kit\n *\t\t\t- mixins\n *\t\t\t- UI Kit\n *\t\t\t- Components ( Slideshow / Menu / Player ... )\n * - Reflex Server\n *\n */\n\n/**\n * FEATURES :\n *\n * - Basic v-dom\n * \t ✔ Create / remove elements\n * \t ✔ Set / remove attributes\n * \t ✔ Set / remove event listeners\n * \t ✔ Reuse previous components, do not trash everything everytime\n * \t ✔ innerHTML\n *   ✔ Class as string or array filtered with booleans\n *   \t- Optimize class when does not changes, is it possible ?\n *   ✔ Style as object only\n *   \t- Optimize style when does not changes, is it possible ?\n *\n * - Advanced v-dom\n *   ✔ Move elements and keep track of dom elements with keyed virtual nodes\n *   \t✔ Add to top\n *   \t✔ Add to bottom\n *   \t✔ Remove from top\n *   \t✔ Remove from bottom\n *   \t✔ Insert in the middle\n *      ✔ Remove from the middle\n *      ✔ Basic swap\n *  \tX Optimized Swap\n *  \t\t- Do 2 operations, should do only one\n *   ✔ Keep track of component instances\n *   ✔ Remove subtrees recursively\n *   ✔ Sub tree rendering\n *   ✔ Rendering optimization (like memo and skip)\n *\n * - Reactive\n *   ✔ Dom ref / component ref\n *   ✔ Factory helpers (like hooks), find name and prefix\n *   ✔ Var in ref as let ! Yeah\n *   ✔ States / observers\n *   ✔ Stores\n *   ✔ Mount / Unmount\n *   ✔ Updated + Props\n *\n * - Advanced Reactive\n *   - Multi refs in for loops and stuff, need to keep correct indexes even when moving\n *   - Factory Errors / Component errors ( try catch on instance + render etc )\n *   - Async states ! With cancellation\n *   - Fetch hook with race condition management + states + cache + cancellable\n *   - Imperative handles\n *\n * - Types\n * \t - Basic JSX Type\n * \t - Render and component return JSX Types\n * \t - Props types\n *\n * - Release\n * \t - Optimize\n * \t - Benchmark\n * \t - Docs\n * \t - Release\n *\n * V2 :\n * - Advanced Hot Module reloading with state keeping automagically\n */\n\n// NOTE : Avoid glob exports from which insert an helper\n// Unzipped is smaller with glob but bigger when zipped\nexport { state, asyncState } from \"./state\"\nexport { ref, refs, IRef, IRefs } from \"./ref\"\nexport { mounted, unmounted, changed } from \"./lifecycle\"\nexport { render, invalidateComponent } from \"./render\"\n// Also export createElement for JSX pragma React\nexport { h, h as createElement } from \"./jsx\"\n","import { getHookedComponent } from \"./diff\";\nimport { invalidateComponent } from \"./render\";\nimport {\n\tcreateAsyncObservable, createStateObservable, IAsyncObservable,\n\tIStateObservable, TInitialValue\n} from \"./observable\";\n\n// ----------------------------------------------------------------------------- STATE\n\nexport function state <GType> ( initialValue?:TInitialValue<GType> ):IStateObservable<GType> {\n\tconst component = getHookedComponent()\n\tconst observable = createStateObservable( initialValue, () => invalidateComponent( component ) )\n\tcomponent._observables.push( observable )\n\treturn observable\n}\n\n// ----------------------------------------------------------------------------- ASTNC STATE\n\nexport function asyncState <GType> ( initialValue?:TInitialValue<GType> ):IAsyncObservable<GType> {\n\tconst component = getHookedComponent()\n\t// TODO : Implement this\n\tconst observable = createAsyncObservable( initialValue, () => invalidateComponent( component ) )\n\t// TODO : We may need cancellable Promises. Maybe just use reject ? And throw errors in legacy mode.\n\tcomponent._observables.push( observable )\n\treturn observable\n}","import {\n\t_TEXT_NODE_TYPE_NAME, RenderDom, RenderFunction,\n\tVNode, VNodeDomType, VTextNode, ComponentFunction,\n\tComponentReturn, _flattenChildren, _isFunction\n} from \"./common\";\nimport { cloneVNode } from \"./jsx\";\nimport { IInternalRef, IInternalRefs } from \"./ref\";\nimport { ComponentInstance, createComponentInstance, recursivelyUpdateMountState } from \"./component\";\n\n/**\n * TODO : Errors\n * - Disallow a component render function to return a component as main node !\n * \t\t\t() => <OtherComponent /> <- Forbidden\n * - Disallow a component which render an array\n * \t\t\t() => [<div />, <div />] <- Forbidden\n */\n\n// ----------------------------------------------------------------------------- CONSTANTS\n\n// Virtual node object is injected into associated dom elements with this name\nexport const _DOM_PRIVATE_VIRTUAL_NODE_KEY = \"__v\"\n\n// Attached listeners to a dom element are stored in this array\nexport const _DOM_PRIVATE_LISTENERS_KEY = \"__l\"\n\n// Stolen from Preact, to check if a style props is non-dimensional (does not need to add a unit)\nconst _IS_NON_DIMENSIONAL_REGEX = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n\n// Check if an event is a capture one\nconst _CAPTURE_REGEX = /Capture$/\n\n// ----------------------------------------------------------------------------- CURRENT SCOPED COMPONENT\n\n// We store current component in factory phase for hooks\nlet _hookedComponent:ComponentInstance = null\nexport function getHookedComponent ():ComponentInstance {\n\tif ( !_hookedComponent && process.env.NODE_ENV !== \"production\" )\n\t\t// throw new ReflexError(`getHookedComponent // Cannot use a factory hook outside of a factory component.`)\n\t\tthrow new Error(`Reflex - getHookedComponent // Cannot use a factory hook outside of a factory component.`)\n\treturn _hookedComponent\n}\n\n// ----------------------------------------------------------------------------- COMMON\n\nfunction getEventNameAndKey ( name:string, dom:Element ) {\n\t// Note : Capture management stolen from Preact, thanks\n\tconst useCapture = name !== ( name = name.replace(_CAPTURE_REGEX, '') );\n\t// Infer correct casing for DOM built-in events:\n\tconst eventName = ( name.toLowerCase() in dom ? name.toLowerCase() : name ).slice(2)\n\t// Create unique key for this event\n\tconst eventKey = eventName + (useCapture ? 'C' : '')\n\treturn { eventName, eventKey, useCapture }\n}\n\n// Stolen from Preact, attach some style à key / value to a dom element\nfunction setStyle ( style:CSSStyleDeclaration, key:string, value:string|null ) {\n\tif (key[0] === '-')\n\t\tstyle.setProperty(key, value);\n\telse if (value == null)\n\t\tstyle[key] = '';\n\t// FIXME : IS_NON_DIMENSIONAL_REGEX -> Is it really necessary ?\n\telse if ((typeof value)[0] != 'n' || _IS_NON_DIMENSIONAL_REGEX.test(key))\n\t\tstyle[key] = value;\n\telse\n\t\tstyle[key] = value + 'px';\n}\n\nfunction updateNodeRef ( node:VNode ) {\n\tif ( !node._ref ) return;\n\t// Ref as refs\n\tif ( 'list' in node._ref ) {\n\t\t// FIXME : Type\n\t\t// FIXME : Keep track of index ? Do it from diffChildren maybe ?\n\t\t( node._ref as IInternalRefs ).setFromVNode( 0, node as any )\n\t} else {\n\t\t// FIXME : Type\n\t\t( node._ref as IInternalRef ).setFromVNode( node as any )\n\t}\n}\n\n// Shallow compare two objects, applied only for props between new and old virtual nodes.\n// Will not compare \"children\" which is always different\n// https://esbench.com/bench/62a138846c89f600a5701904\nconst shallowPropsCompare = ( a:object, b:object ) => (\n\t// Same amount of properties ?\n\tObject.keys(a).length === Object.keys(b).length\n\t// Every property exists in other object ?\n\t// Never test \"children\" property which is always different\n\t&& Object.keys(a).every( key => key === \"children\" || (b.hasOwnProperty(key) && a[key] === b[key]) )\n)\n\n// ----------------------------------------------------------------------------- DIFF ELEMENT\n\nexport function diffElement ( newNode:VNode, oldNode:VNode ) {\n\t// console.log(\"diffElement\", newNode, oldNode)\n\tconst isTextNode = newNode.type == _TEXT_NODE_TYPE_NAME\n\t// Get dom element from oldNode or create it\n\tconst dom:RenderDom = (\n\t\toldNode ? oldNode.dom : (\n\t\t\tisTextNode\n\t\t\t? document.createTextNode( (newNode as VTextNode).props.value )\n\t\t\t: document.createElement( newNode.type as VNodeDomType )\n\t\t)\n\t)\n\t// Update text contents\n\tif ( isTextNode && oldNode ) {\n\t\tconst { value } = (newNode as VTextNode).props;\n\t\t// Only when content has changed\n\t\tif ( value != (dom as Text).nodeValue )\n\t\t\t( dom as Text ).nodeValue = value\n\t}\n\t// Text nodes does not have attributes or events\n\tif ( isTextNode ) return dom\n\t// Remove attributes which are removed from old node\n\toldNode && Object.keys( oldNode.props ).map( name => {\n\t\t// Do not process children and remove only if not in new node\n\t\tif ( name == \"children\" ) return\n\t\tif ( name in newNode.props && newNode.props[ name ] === oldNode.props[ name ] )\n\t\t\treturn\n\t\t// Insert HTML directly without warning\n\t\tif ( name == \"innerHTML\" )\n\t\t\t( dom as Element ).innerHTML = \"\" // FIXME : Maybe use delete or null ?\n\t\t\t// Events starts with \"on\". On preact this is optimized with [0] == \"o\"\n\t\t// But recent benchmarks are pointing to startsWith usage as faster\n\t\telse if ( name.startsWith(\"on\") ) {\n\t\t\tconst { eventName, eventKey, useCapture } = getEventNameAndKey( name, dom as Element );\n\t\t\tdom.removeEventListener( eventName, dom[ _DOM_PRIVATE_LISTENERS_KEY ][ eventKey ], useCapture )\n\t\t}\n\t\t// Other attributes\n\t\telse {\n\t\t\t( dom as Element ).removeAttribute( name )\n\t\t}\n\t})\n\t// Update props\n\tObject.keys( newNode.props ).map( name => {\n\t\tif ( name == \"children\" ) return\n\t\tlet value = newNode.props[ name ];\n\t\t// Do not continue if attribute or event did not change\n\t\tif ( oldNode && name in oldNode.props && oldNode.props[ name ] === value )\n\t\t\treturn;\n\t\t// Insert HTML directly without warning\n\t\tif ( name == \"innerHTML\" )\n\t\t\t( dom as Element ).innerHTML = value\n\t\t// Events starts with \"on\". On preact this is optimized with [0] == \"o\"\n\t\t// But recent benchmarks are pointing to startsWith usage as faster\n\t\telse if ( name.startsWith(\"on\") ) {\n\t\t\tconst { eventName, eventKey, useCapture } = getEventNameAndKey( name, dom as Element );\n\t\t\t// Init a collection of handlers on the dom object as private property\n\t\t\tdom[ _DOM_PRIVATE_LISTENERS_KEY ] ??= new Map();\n\t\t\t// Store original listener to be able to remove it later\n\t\t\tdom[ _DOM_PRIVATE_LISTENERS_KEY ][ eventKey ] = value;\n\t\t\t// And attach listener\n\t\t\tdom.addEventListener( eventName, value, useCapture )\n\t\t}\n\t\t// Other attributes, just set right on the dom element\n\t\telse {\n\t\t\t// className as class for non jsx components\n\t\t\tif ( name == \"className\" )\n\t\t\t\tname = \"class\"\n\t\t\t// Manage class as arrays\n\t\t\tif ( name == \"class\" && Array.isArray( value ) )\n\t\t\t\tvalue = value.filter( v => v !== true && !!v ).join(\" \").trim()\n\t\t\t// Manage style as object only\n\t\t\telse if ( name == \"style\" && (typeof value)[0] == \"o\" )\n\t\t\t\t// FIXME : Can it be optimized ? Maybe only setStyle when needed ?\n\t\t\t\treturn Object.keys( value ).map(\n\t\t\t\t\tk => setStyle( (dom as HTMLElement).style, k, value[k] )\n\t\t\t\t);\n\t\t\t// Remove falsy values\n\t\t\telse if ( value == false )\n\t\t\t\treturn;\n\t\t\t// FIXME : What about checked / disabled / autoplay ...\n\t\t\t// Set new attribute value\n\t\t\t( dom as Element ).setAttribute( name, value )\n\t\t}\n\t})\n\treturn dom;\n}\n\n// ----------------------------------------------------------------------------- DIFF CHILDREN\n\n/**\n * Note about performances\n * - Very important, avoid loops in loops ! Prefer 4 static loops at top level\n *   rather than 2 nested loops. n*4 is lower than n^n !\n */\nexport function diffChildren ( newParentNode:VNode, oldParentNode?:VNode ) {\n\t// console.log(\"Diff children\", newParentNode, oldParentNode)\n\t// Target new and old children.\n\tconst newChildren = newParentNode.props.children?.flat()\n\tconst oldChildren = oldParentNode?.props.children?.flat()\n\t// FIXME : If new does not have children but old does, we need to destroy old children components instances\n\tif ( !newChildren ) return;\n\tconst parentDom = newParentNode.dom as Element\n\t// Create key array on parent node to register keyed children\n\t// This will allow us to find any child by its key directly without\n\t// having to search for it\n\tnewParentNode._keys = new Map()\n\tconst registerKey = c => {\n\t\tif ( c?.key ) newParentNode._keys[ c.key ] = c\n\t}\n\t// This is a new parent node (no old), so no diffing\n\t// we juste process and add every child node\n\tif ( !oldChildren ) {\n\t\tnewChildren.map( newChildNode => {\n\t\t\tif (!newChildNode) return;\n\t\t\tdiffNode( newChildNode )\n\t\t\tparentDom.appendChild( newChildNode.dom )\n\t\t\t// Register this child with its key on its parent\n\t\t\tregisterKey( newChildNode )\n\t\t})\n\t\treturn;\n\t}\n\t// Map all new children keys into the keys register to avoid to use find\n\t// when searching for removed nodes\n\t// NOTE : About performances : 1st non-nested loop\n\tnewChildren.map( registerKey )\n\t// Check if an old keyed node has been removed and get which index are offset after removal\n\t// NOTE : About performances : 2nd non-nested loop\n\tconst lostIndexes = oldChildren.map(\n\t\toldChild => !!(oldChild?.key && !newParentNode._keys[oldChild.key] )\n\t)\n\t// Otherwise we need to compare between old and new tree\n\tconst oldParentKeys = oldParentNode._keys\n\tlet collapseCount = 0\n\t// NOTE : About performances : 3rd non-nested loop\n\tnewChildren.map( (newChildNode, i) => {\n\t\t// Collapsed corresponding index between old and new nodes\n\t\t// To be able to detect moves or if just collapsing because a top sibling\n\t\t// has been removed\n\t\tif ( lostIndexes[i] )\n\t\t\tcollapseCount ++\n\t\t/** REMOVED **/\n\t\t// If falsy, it's surely a child that has been removed with a ternary or a boolean\n\t\t// Do nothing else and do not mark old node to keep, so it will be removed\n\t\tif ( !newChildNode )\n\t\t\treturn;\n\t\t// Has key, same key found in old, same type on both\n\t\t/** MOVE & UPDATE KEYED CHILD **/\n\t\tif (\n\t\t\tnewChildNode.key\n\t\t\t&& oldParentKeys[ newChildNode.key ]\n\t\t\t&& oldParentKeys[ newChildNode.key ].type == newChildNode.type\n\t\t) {\n\t\t\tconst oldNode = oldParentKeys[ newChildNode.key ]\n\t\t\tdiffNode( newChildNode, oldNode )\n\t\t\toldNode._keep = true;\n\t\t\t// Check if index changed, compare with collapsed index to detect moves\n\t\t\tconst collapsedIndex = i + collapseCount\n\t\t\t// FIXME : Should do 1 operation when swapping positions, not 2\n\t\t\t// FIXME : Perf, is indexOf quick ? Maybe store every indexes in an array ?\n\t\t\tif ( oldChildren.indexOf( oldNode ) != collapsedIndex )\n\t\t\t\tparentDom.insertBefore( newChildNode.dom, parentDom.children[ i ] )\n\t\t}\n\t\t// Has key, but not found in old\n\t\t/** CREATE **/\n\t\telse if ( newChildNode.key && !oldParentKeys[ newChildNode.key ] ) {\n\t\t\tdiffNode( newChildNode )\n\t\t\tparentDom.insertBefore( newChildNode.dom, parentDom.children[ i ] )\n\t\t\tcollapseCount --\n\t\t}\n\t\t// Found at same index, with same type.\n\t\t// Old node does not have a key.\n\t\t/** UPDATE IN PLACE **/\n\t\telse if ( i in oldChildren && oldChildren[ i ] && oldChildren[ i ].type == newChildNode.type ) {\n\t\t\tconst oldNode = oldChildren[ i ]\n\t\t\tdiffNode( newChildNode, oldNode )\n\t\t\toldNode._keep = true;\n\t\t}\n\t\t// Not found\n\t\t/** CREATE **/\n\t\telse {\n\t\t\tdiffNode( newChildNode )\n\t\t\tparentDom.insertBefore( newChildNode.dom, parentDom.children[ i ] )\n\t\t\tcollapseCount --\n\t\t}\n\t})\n\t// Remove old children which are not reused\n\t// NOTE : About performances : 4th non-nested loop\n\toldChildren.map( oldChildNode => {\n\t\tif ( oldChildNode && !oldChildNode._keep ) {\n\t\t\t// Call unmount handlers\n\t\t\trecursivelyUpdateMountState( oldChildNode, false );\n\t\t\t// Remove ref\n\t\t\tconst { dom } = oldChildNode\n\t\t\toldChildNode.dom = null;\n\t\t\tupdateNodeRef( oldChildNode )\n\t\t\tparentDom.removeChild( dom )\n\t\t}\n\t})\n}\n\n// ----------------------------------------------------------------------------- DIFF NODE\n\nfunction renderComponentNode <GReturn = ComponentReturn> ( node:VNode<null, ComponentFunction>, component:ComponentInstance ) :GReturn {\n\t// Tie component and virtual node\n\tcomponent.vnode = node\n\tnode._component = component\n\t// Select hooked component\n\t_hookedComponent = component;\n\t// FIXME: Before render handlers ?\n\t// FIXME: Optimize rendering with a hook ?\n\t// Execute rendering\n\tconst result = (component._render ?? node.type as RenderFunction)\n\t\t.apply( component, [ component._propsProxy.value ])\n\t// Unselect hooked component\n\t_hookedComponent = null\n\treturn result as GReturn\n}\n\nexport function diffNode ( newNode:VNode, oldNode?:VNode ) {\n\t// IMPORTANT : Here we clone node if we got the same instance\n\t// \t\t\t   Otherwise, altering props.children after render will fuck everything up\n\t// Clone identical nodes to be able to diff them\n\tif ( oldNode && oldNode === newNode )\n\t\tnewNode = cloneVNode( oldNode )\n\t// Transfer component instance from old node to new node\n\tlet component:ComponentInstance = oldNode?._component\n\t// We may need a new component instance\n\tlet renderResult:VNode\n\tif ( !component && _isFunction(newNode.type) ) {\n\t\t// Create component instance (without new keyword for better performances)\n\t\tcomponent = createComponentInstance( newNode as VNode<null, ComponentFunction> )\n\t\t// Execute component's function and check what is returned\n\t\tconst result = renderComponentNode( newNode as VNode<null, ComponentFunction>, component )\n\t\t// This is a factory component which return a render function\n\t\tif ( _isFunction(result) ) {\n\t\t\tcomponent._render = result as RenderFunction\n\t\t\tcomponent.isFactory = true\n\t\t}\n\t\t// This is pure functional component which returns a virtual node\n\t\telse if ( (typeof result)[0] == \"o\" && \"type\" in result ) {\n\t\t\tcomponent._render = newNode.type as RenderFunction\n\t\t\tcomponent.isFactory = false\n\t\t\trenderResult = result\n\t\t}\n\t}\n\tlet dom:RenderDom\n\t// Virtual node is a dom element\n\tif ( !component ) {\n\t\tnewNode.dom = dom = diffElement( newNode, oldNode )\n\t}\n\t// Virtual node is a component\n\telse {\n\t\t// FIXME : Is it a good idea to shallow compare props on every changes by component ?\n\t\t// \t\t\t-> It seems to be faster than preact + memo with this 👀, check other cases\n\t\t// TODO : Maybe do not shallow by default but check if component got an \"optimize\" function\n\t\t//\t\t\twhich can be implemented with hooks. We can skip a lot with this !\n\t\t// FIXME : Does not work if props contain dynamic arrow functions :(\n\t\t//\t\t\t<Sub onEvent={ e => handler(e, i) } />\n\t\t//\t\t\tHere the handler is a different ref at each render\n\t\t// If props did not changed between old and new\n\t\t// Only optimize pure components, factory components mau have state so are not pure\n\t\tif (\n\t\t\t// If pure functional component has not already been rendered\n\t\t\t!renderResult\n\t\t\t// Need to be a component update, on a pure functional component,\n\t\t\t&& oldNode && !component.isFactory // && !component.isDirty\n\t\t\t// New component isn't marked as not pure\n\t\t\t&& newNode.props.pure !== false // FIXME : Rename it forceRefresh={ true } ?\n\t\t\t// Cannot optimize components which have children properties\n\t\t\t// Because parent component may have altered rendering of injected children\n\t\t\t&& newNode.props.children.length === 0\n\t\t\t// Do shallow compare\n\t\t\t&& shallowPropsCompare(newNode.props, oldNode.props)\n\t\t) {\n\t\t\t// FIXME : Weirdly, it seems to optimize not all components\n\t\t\t//\t\t\tEx : click on create 1000 several times and watch next console log\n\t\t\t// console.log(\"OPTIMIZE\")\n\t\t\t// Do not re-render, just get children and dom from old node\n\t\t\t// newNode.props.children = [ ...oldNode.props.children ]\n\t\t\tnewNode.props.children = oldNode.props.children\n\t\t\tnewNode.dom = dom = oldNode.dom\n\t\t}\n\t\t// Not already rendered, and not optimization possible. Render now.\n\t\telse if ( !renderResult ) {\n\t\t\tcomponent._propsProxy.set( newNode.props )\n\t\t\trenderResult = renderComponentNode<VNode>( newNode as VNode<null, ComponentFunction>, component )\n\t\t}\n\t\t// We rendered something (not reusing old component)\n\t\tif ( renderResult ) {\n\t\t\t// Apply new children list to the parent component node\n\t\t\tnewNode.props.children = _flattenChildren( renderResult )\n\t\t\t// Diff rendered element\n\t\t\tnewNode.dom = dom = diffElement( renderResult, oldNode )\n\t\t\t// Assign ref of first virtual node to the component's virtual node\n\t\t\tnewNode._ref = renderResult._ref\n\t\t}\n\t\t// Tie up node and component\n\t\tnewNode._component = component\n\t\tcomponent.vnode = newNode as any\n\t\t// Component is clean and rendered now\n\t\tcomponent._isDirty = false\n\t}\n\t// Update ref on node\n\tupdateNodeRef( newNode )\n\t// Diff children of this element (do not process text nodes)\n\tif ( dom instanceof Element )\n\t\tdiffChildren( newNode, oldNode )\n\t// If component is not mounted yet, mount it recursively\n\tif ( component && !component.isMounted )\n\t\trecursivelyUpdateMountState( newNode, true )\n\t// Execute after render handlers\n\tcomponent?._renderHandlers.map( h => h() )\n}\n","import { IRef, IRefs } from \"./ref\";\nimport { ComponentInstance } from \"./component\";\n\n// ----------------------------------------------------------------------------- TYPES\n\n// Declare global JSX override hack\n// declare global {\n// \tnamespace JSX {\n//\n// \t}\n// }\n\n// ----------------------------------------------------------------------------- CONSTANTS\n\n// Name of private node types which should not be created with JSX\n\nexport const _TEXT_NODE_TYPE_NAME = \"#T\"\nexport const _ROOT_NODE_TYPE_NAME = \"#R\"\n\n// ----------------------------------------------------------------------------- ERRORS\n\n//export class ReflexError extends Error {}\n\n// ----------------------------------------------------------------------------- POLYFILLS\n\n// TODO : Into ecma-core + inline in bundle\nexport const _microtask = ( window.queueMicrotask ?? ( h => window.setTimeout( h, 0 )) )\n\n// ----------------------------------------------------------------------------- UTILS\n\n// Force a list or a lonely item to be an array with the same type\n// TODO : Into ecma-core + inline in bundle\nexport const _forceArray = <G>( item:G|G[] ):G[] => Array.isArray( item ) ? item : [ item ]\n\n\nexport const _isFunction = fn => (typeof fn)[0] == \"f\"\n\nexport function _flattenChildren ( vnode:VNode ) {\n\t// Re-assign flattened array to the original virtual node, and return it\n\treturn vnode.props.children = (vnode.props?.children?.flat() ?? [])\n}\n\n// ----------------------------------------------------------------------------- INTERNAL - CREATE COMPONENT\n\nexport type RenderDom = Element|Text\n\n// FIXME : Cannot be VNode[] in current implementation.\n// FIXME : Cannot be string in current implementation.\nexport type RenderFunction = () => VNode\nexport type FunctionalComponent = RenderFunction\nexport type ComponentReturn = RenderFunction|VNode\nexport type FactoryComponent = () => RenderFunction\nexport type ComponentFunction = FunctionalComponent|FactoryComponent\n\nexport type LifecycleHandler <GReturn = void> = (...rest) => GReturn\nexport type MountHandler = LifecycleHandler|LifecycleHandler<LifecycleHandler>\n\n// ----------------------------------------------------------------------------- JSX H / CREATE ELEMENT\n\nexport type VNodeDomType = keyof (HTMLElementTagNameMap|SVGElementTagNameMap)\nexport type InternalVNodeTypes = typeof _ROOT_NODE_TYPE_NAME | typeof _TEXT_NODE_TYPE_NAME\n\nexport interface VNodeBaseProps {\n\tchildren\t?:VNode[],\n\tkey\t\t\t?:string\n\tref\t\t\t?:IRef|IRefs\n\tpure\t\t?:boolean\n}\n\nexport interface VNode <\n\tGProps \t= VNodeBaseProps,\n\tGType \t= ( VNodeDomType | InternalVNodeTypes | ComponentFunction ),\n> {\n\ttype\t\t\t:GType\n\tprops\t\t\t:GProps\n\tkey\t\t\t\t:string\t// Allow numbers ?\n\tdom\t\t\t\t?:RenderDom\n\t_keys\t\t\t?:Map<string, VNode>\n\t_ref\t\t\t?:IRef | IRefs\n\t_component\t\t?:ComponentInstance\n\t_keep\t\t\t?:boolean\n}\n\nexport interface VTextNode extends VNode<{value:string}> {\n\ttype\t\t: typeof _TEXT_NODE_TYPE_NAME\n}\n\nexport type VNodeOrVNodes = VNode|VNode[]\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","import { _TEXT_NODE_TYPE_NAME, VNode } from \"./common\";\n\n// NOTE : Keep it in a function and do not inline this\n// It seems to be V8 optimized. @see Preact source code\nexport function createVNode ( type, props, key?, ref? ):VNode {\n\treturn { type: type, props: props, key: key, _ref: ref }\n}\n\nexport function cloneVNode ( vnode:VNode ) {\n\treturn {\n\t\t...vnode,\n\t\t// IMPORTANT : also clone props object\n\t\tprops: { ...vnode.props }\n\t}\n}\n\n\nexport function h ( type, props, ...children ) {\n\t// Remove debug properties\n\t// FIXME : Keep them in debug mode ? But in vnode not in props.\n\tlet nodeProps:any = {}\n\tlet key, ref\n\tfor ( let i in props ) {\n\t\tconst value = props[ i ]\n\t\t// Set apart key and ref\n\t\tif ( i == \"key\" )\n\t\t\tkey = value\n\t\telse if ( i == \"ref\" )\n\t\t\tref = value\n\t\t// Remove __self and __source debug props\n\t\telse if ( !i.startsWith('__') )\n\t\t\tnodeProps[i] = value\n\t}\n\t// Inject children in props\n\tnodeProps.children = children.map( child => (\n\t\t// Convert string and number children to text virtual nodes\n\t\t( [\"s\", \"n\"].indexOf( (typeof child)[0] ) != -1 )\n\t\t? createVNode( _TEXT_NODE_TYPE_NAME, { value: '' + child })\n\t\t// Otherwise keep child generated by JSX\n\t\t: child\n\t))\n\treturn createVNode( type, nodeProps, key, ref )\n}\n\n\n\n// export function h ( type, props, ...children ) {\n// \t// Remove debug properties\n// \t// FIXME : Keep them in debug mode ? But in vnode not in props.\n// \tdelete props.__self\n// \tdelete props.__source\n// \t// Extract key and ref from props\n// \tconst { key, ref, ...nodeProps } = props\n// \t// Inject children in props\n// \tnodeProps.children = ( children ?? [] ).map( child => (\n// \t\t// Convert string and number children to text virtual nodes\n// \t\t( [\"string\", \"number\"].indexOf( typeof child ) !== -1 )\n// \t\t\t? createVNode( _TEXT_NODE_TYPE_NAME, { value: child + '' })\n// \t\t\t// Otherwise keep child generated by JSX\n// \t\t\t: child\n// \t))\n// \treturn createVNode( type, nodeProps, key, ref )\n// }","import {\n\tComponentFunction, _flattenChildren, LifecycleHandler,\n\tMountHandler, RenderFunction,\n\t_TEXT_NODE_TYPE_NAME, VNode, _isFunction\n} from \"./common\";\nimport { IStateObservable } from \"@zouloux/signal\";\n\n// ----------------------------------------------------------------------------- TYPES\n\nexport interface ComponentInstance { // FIXME : Generics ?\n\tvnode\t\t\t\t:VNode<null, ComponentFunction>\n\tname\t\t\t\t:string\n\tisFactory\t\t\t?:boolean\n\tisMounted\t\t\t:boolean;\n\t_isDirty\t\t\t?:boolean\n\t_render\t\t\t\t?:RenderFunction\n\t_propsProxy\t\t\t?:IPropsProxy<any>\n\t_mountHandlers\t\t:MountHandler[]\n\t_renderHandlers\t\t:LifecycleHandler[]\n\t_unmountHandlers\t:LifecycleHandler[]\n\t_observables\t\t:IStateObservable<any>[]\n\t// TODO : Imperative handlers ?\n}\n\n// ----------------------------------------------------------------------------- CREATE COMPONENT INSTANCE\n\n// Optimize it in a function @see jsx.ts/createVNode()\nexport function createComponentInstance ( vnode:VNode<null, ComponentFunction> ):ComponentInstance {\n\treturn {\n\t\tvnode,\n\t\t_propsProxy: createPropsProxy( vnode.props ),\n\t\t_isDirty: false,\n\t\tisMounted: false,\n\t\tname: vnode.type.name,\n\t\t_mountHandlers: [],\n\t\t_renderHandlers: [],\n\t\t_unmountHandlers: [],\n\t\t_observables: [],\n\t}\n}\n\n// ----------------------------------------------------------------------------- PROPS PROXY\n// Props proxy exists because we need a way to get updated props in a factory\n// component. Because factory function is executed once, props object passed\n// as first argument cannot be updated. Proxy helps us here because it will\n// allow us to mock props but with every props updated.\n// A caveat is that props is not iterable because proxy is a dynamic key / value\n// object. Not really concerning because it makes no sense to iterate over\n// a props object.\n\nexport interface IPropsProxy <GType> {\n\treadonly value:GType\n\tset ( newValue:GType ) : void\n}\n\nfunction createPropsProxy <GProps> ( props:GProps ) : IPropsProxy<GProps> {\n\tconst proxy = new Proxy({}, {\n\t\t// When request a prop, check on props object if it exists\n\t\tget ( target:{}, propName:string|symbol ):any {\n\t\t\treturn ( propName in props ? props[ propName ] : void 0 )\n\t\t},\n\t\t// Disallow set on props\n\t\tset () {\n\t\t\tif ( process.env.NODE_ENV == \"production\" ) return false\n\t\t\tthrow new Error(`Reflex - PropsProxy.set // Setting values to props manually is not allowed.`)\n\t\t}\n\t})\n\treturn {\n\t\t// Get the proxy object typed as a GProps object\n\t\tget value () { return proxy as GProps },\n\t\t// This method will set new props object (we override first argument of createPropsProxy)\n\t\tset ( newProps:GProps ) { props = newProps }\n\t}\n}\n\n// ----------------------------------------------------------------------------- MOUNT / UNMOUNT\n\nexport function mountComponent ( component:ComponentInstance ) {\n\t// Call every mount handler and store returned unmount handlers\n\tcomponent._mountHandlers.map( handler => {\n\t\tconst mountedReturn = handler.apply( component, [] );\n\t\tif ( _isFunction(mountedReturn) )\n\t\t\tcomponent._unmountHandlers.push( mountedReturn )\n\t})\n\t// Reset mount handlers, no need to keep them\n\tcomponent._mountHandlers = []\n\tcomponent.isMounted = true;\n}\n\nexport function unmountComponent ( component:ComponentInstance ) {\n\tcomponent._unmountHandlers.map( h => h.apply( component, [] ) )\n\tcomponent._observables.map( o => o.dispose() )\n\t// FIXME : Do we need to do this ? Is it efficient or is it just noise ?\n\t//delete component.vnode\n\t// delete component.propsProxy\n\tdelete component._mountHandlers;\n\tdelete component._renderHandlers;\n\tdelete component._unmountHandlers;\n\tdelete component._observables\n\tcomponent.isMounted = false;\n}\n\nexport function recursivelyUpdateMountState ( node:VNode, doMount:boolean ) {\n\tif ( node.type == _TEXT_NODE_TYPE_NAME ) return\n\t_flattenChildren( node ).map( c => c && recursivelyUpdateMountState(c, doMount) )\n\tif ( node._component )\n\t\tdoMount ? mountComponent( node._component ) : unmountComponent( node._component )\n}","import { _ROOT_NODE_TYPE_NAME, _forceArray, VNodeOrVNodes, _microtask } from \"./common\";\nimport { diffChildren, diffNode, _DOM_PRIVATE_VIRTUAL_NODE_KEY } from \"./diff\";\nimport { createVNode } from \"./jsx\";\nimport { ComponentInstance } from \"./component\";\n\n// ----------------------------------------------------------------------------- RENDER\n\nexport function render ( rootNode:VNodeOrVNodes, parentElement:HTMLElement ) {\n\t// When using render, we create a new root node to detect new renders\n\t// This node is never rendered, we just attach it to the parentElement and render its children\n\tconst root = createVNode( _ROOT_NODE_TYPE_NAME, { children: _forceArray( rootNode ) })\n\troot.dom = parentElement\n\tdiffChildren( root, parentElement[ _DOM_PRIVATE_VIRTUAL_NODE_KEY ] )\n\tparentElement[ _DOM_PRIVATE_VIRTUAL_NODE_KEY ] = root\n}\n\n// ----------------------------------------------------------------------------- INVALIDATION\n\nlet componentsToUpdate:ComponentInstance[] = []\nfunction updateDirtyComponents () {\n\tlet p\n\tif ( process.env.NODE_ENV !== \"production\" )\n\t\tp = require(\"./debug\").trackPerformances(\"Update dirty components\")\n\t// TODO : Update with depth ! Deepest first ? Or last ?\n\tcomponentsToUpdate.map( component => {\n\t\tdiffNode( component.vnode, component.vnode )\n\t})\n\tcomponentsToUpdate = []\n\tp && p();\n}\n\nexport function invalidateComponent ( component:ComponentInstance ) {\n\t// Queue rendering before end of frame\n\tif ( componentsToUpdate.length === 0 )\n\t\t_microtask( updateDirtyComponents );\n\t// Invalidate this component once\n\tif ( component._isDirty ) return;\n\tcomponent._isDirty = true\n\t// Store it into the list of dirty components\n\tcomponentsToUpdate.push( component )\n}\n\n// ----------------------------------------------------------------------------- REGISTER WEB-COMPONENTS\n\n// TODO : Web components ! Check how lit and preact webcomponents works\n//\t\t\t- Register web-components with ComponentName to <component-name />\n//  \t\t- Update properties when changed in DOM\n//  \t\t\t- Need translation (detect numbers, maybe json for array and objects ?)\n//\t\t\t\t- Maybe an API to set props with JS and with advanced type (like functions)\n//\t\t\t- Children\n//\t\t\t- DOM Find\n//\t\t\t- Mount / Unmount\n\n// ----------------------------------------------------------------------------- HYDRATE\n\n// TODO : Hydrate\n// TODO : Render to string or render to web components to avoid expensive hydratation ?\n\n","\n// ----------------------------------------------------------------------------- ENABLE / DISABLE\n\nlet _enableReflexDebug = false;\n\nexport function getReflexDebug () { return _enableReflexDebug }\nexport function setReflexDebug (value:boolean) {\n\t_enableReflexDebug = value\n}\n\n// ----------------------------------------------------------------------------- TRACK PERFORMANCES\n\nexport function trackPerformances ( subject:string ) {\n\tif ( process.env.NODE_ENV === \"production\" || !_enableReflexDebug )\n\t\treturn () => {};\n\tconst start = performance.now()\n\treturn () => {\n\t\tconst delta = ~~( performance.now() - start )\n\t\tconsole.info( subject, delta < 1000 ? `${delta}ms` : `${delta/1000}s`)\n\t}\n}","import { Signal, ISignal } from \"@zouloux/signal\";\nimport { _isFunction } from \"./common\";\n\n// ----------------------------------------------------------------------------- COMMON TYPES\n\nexport type TChangedHandler<GType, GReturnType = void> = ( newValue:GType, oldValue:GType) => GReturnType|Promise<GReturnType>\n\nexport type TSignalWithoutDispatch <GSignalArguments extends any[]> = Omit<ISignal<GSignalArguments>, \"dispatch\">\n\n// ----------------------------------------------------------------------------- INITIAL VALUE & SETTER\n\nexport type TInitialValue<GType> = GType | (() => GType)\nexport type TSetter<GType> = GType | ((GType) => GType)\n\nconst prepareInitialValue = <GType> ( initialValue:TInitialValue<GType> ) => (\n\t_isFunction(initialValue) ? ( initialValue as () => GType )() : initialValue as GType\n)\n\nconst executeSetter = <GType> ( currentValue:GType, setter:TSetter<GType> ):GType => (\n\t_isFunction(setter) ? (setter as ((GType) => GType))( currentValue ) : setter as GType\n)\n\n// ----------------------------------------------------------------------------- BIT\n\nexport interface IPublicBit <GType> {\n\tonChanged\t\t:TSignalWithoutDispatch<[GType, GType]>\n\tdispose \t\t() : void\n}\n\nexport interface IBit <GType> extends IPublicBit <GType> {\n\tget () : GType\n\tset ( newValue:GType ) : void\n\tdispatch ( newValue:GType, oldValue:GType ) : any|void\n}\n\n/**\n * A bit is a piece of data associated to a signal, a getter and a setter.\n * A raw bit does not dispatch the signal when set on purpose. It's meant to be\n * used by an upper function which holds dispatch as a private member.\n * @param initialValue Initial value or initial value generator.\n */\nexport function createBit <GType> ( initialValue?:TInitialValue<GType> ):IBit<GType> {\n\t// Init and store the value in this scope\n\tlet value:GType = prepareInitialValue( initialValue )\n\t// Create signal and extract dispatch method from it\n\t// So code accessing signal externally would not be able to dispatch and mess\n\tconst onChanged = Signal<[GType, GType]>()\n\tconst { dispatch } = onChanged\n\tdelete onChanged.dispatch;\n\t// Return bit API\n\treturn {\n\t\tonChanged,\n\t\tdispatch,\n\t\tget () { return value },\n\t\tset ( newValue:TSetter<GType> ) { value = executeSetter(value, newValue) },\n\t\tdispose () {\n\t\t\tonChanged.clear();\n\t\t\tvalue = null;\n\t\t}\n\t}\n}\n\n// ----------------------------------------------------------------------------- BASIC OBSERVABLE\n\nexport interface IBasicObservable <GType> extends IPublicBit <GType> {\n\treadonly value:GType\n\tset ( newValue:TInitialValue<GType> ) : void\n}\n\n/**\n * The simplest observable, holds a value a\tand dispatch when mutated.\n * No shallow check, no invalidation step, not cancellable.\n * Everything is synchronous.\n * Has a private _dispose method to destroy it from memory.\n * @param initialValue Initial value or initial value generator.\n */\n/*export function createBasicObservable <GType> ( initialValue?:TInitialValue<GType> ):IBasicObservable<GType> {\n\t// Create the bit and extract private dispatch and setter\n\t// const { get, set, dispatch, ...bit } = createBit<GType>( initialValue );\n\tconst bit = createBit<GType>( initialValue );\n\treturn {\n\t\t// ...bit,\n\t\tonChanged: bit.onChanged,\n\t\tdispose: bit.dispose,\n\t\tget value () { return bit.get() },\n\t\tset ( newValue:GType) {\n\t\t\tconst oldValue = bit.get();\n\t\t\tbit.set( newValue );\n\t\t\tbit.dispatch( newValue, oldValue )\n\t\t}\n\t}\n}*/\n\n// ----------------------------------------------------------------------------- STATE OBSERVABLE\n\nexport interface IStateObservable <GType> extends IBasicObservable <GType> {\n\tset ( newValue:TInitialValue<GType> ) : Promise<void>\n}\n\nexport function createStateObservable <GType> (\n\tinitialValue\t?:TInitialValue<GType>,\n\tbeforeChanged\t?:TChangedHandler<GType, boolean|void>\n):IStateObservable<GType> {\n\t// Create the bit and extract private dispatch and setter\n\t// TODO : IMPORTANT : Weirdly, we can destruct like this with tsc\n\t// \tget value () { return get() } will not work and always return initial value\n\t// const { get, set, dispatch, ...bit } = createBit<GType>( initialValue );\n\tconst bit = createBit<GType>( initialValue );\n\treturn {\n\t\t// ...bit,\n\t\tonChanged: bit.onChanged,\n\t\tdispose: bit.dispose,\n\t\tget value () { return bit.get() },\n\t\tasync set ( newValue:TSetter<GType> ) {\n\t\t\tconst oldValue = bit.get();\n\t\t\tnewValue = executeSetter( oldValue, newValue )\n\t\t\tbit.set( newValue );\n\t\t\tif ( beforeChanged ) {\n\t\t\t\t// isLocked = true;\n\t\t\t\tconst haltChange = await beforeChanged( newValue, oldValue )\n\t\t\t\tif ( haltChange === true ) {\n\t\t\t\t\tbit.set( oldValue );\n\t\t\t\t\t// isLocked = false;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// isLocked = false;\n\t\t\tbit.dispatch( newValue, oldValue );\n\t\t}\n\t}\n}\n\n// ----------------------------------------------------------------------------- ASYNC OBSERVABLE\n\nexport interface IAsyncObservable <GType> extends IStateObservable <GType> {\n\treadonly isChanging\t\t\t:boolean\n\treadonly wasAlreadyChanging\t:boolean\n}\n\nexport function createAsyncObservable <GType> (\n\tinitialValue\t?:TInitialValue<GType>,\n\tbeforeChanged\t?:TChangedHandler<GType, boolean|void>\n):IAsyncObservable<GType> {\n\t// Create the bit and extract private dispatch and setter\n\t// const { get, set, dispatch, ...bit } = createBit<GType>( initialValue );\n\tconst bit = createBit<GType>( initialValue );\n\tlet isChanging = false\n\tlet wasAlreadyChanging = false\n\treturn {\n\t\t// ...bit,\n\t\tonChanged: bit.onChanged,\n\t\tdispose: bit.dispose,\n\t\tget value () { return bit.get() },\n\t\tget isChanging () { return isChanging },\n\t\tget wasAlreadyChanging () { return wasAlreadyChanging },\n\t\tasync set ( newValue:TSetter<GType> ) {\n\t\t\t// Keep old to check changes\n\t\t\tconst oldValue = bit.get();\n\t\t\tnewValue = executeSetter( oldValue, newValue )\n\t\t\tbit.set( newValue )\n\t\t\t// Call private changed as async (may change state asynchronously)\n\t\t\tif ( beforeChanged ) {\n\t\t\t\tif ( isChanging )\n\t\t\t\t\twasAlreadyChanging = true\n\t\t\t\tisChanging = true;\n\t\t\t\tconst haltChange = await beforeChanged( newValue, oldValue )\n\t\t\t\tif ( haltChange === true ) {\n\t\t\t\t\tbit.set( oldValue )\n\t\t\t\t\tisChanging = false\n\t\t\t\t\twasAlreadyChanging = false\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tisChanging = false\n\t\t\t\tif ( wasAlreadyChanging ) {\n\t\t\t\t\twasAlreadyChanging = false\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Call public onChange signal with new and old values\n\t\t\tbit.dispatch( newValue, oldValue )\n\t\t}\n\t}\n}\n","export * from \"./signal.es2020.mjs\";\nexport * from \"./state-signal.es2020.mjs\";\nexport * from \"./observable.es2020.mjs\";\n","// TODO v1.1 RC\n// -> Better generic types that can leak from dispatch, without generic set at init\n// -> Better generic types which respect type order for GHP\n// ----------------------------------------------------------------------------- CLASSIC SIGNAL\nexport function Signal() {\n    // List of attached listeners\n    let _listeners = [];\n    // Remove a listener by its reference\n    const remove = (handler) => _listeners = _listeners.filter(l => l[0] !== handler);\n    // Add a listener with once and call at init parameters\n    function add(handler, once, callAtInit = false) {\n        // Add listener\n        _listeners.push([handler, once]);\n        // Call at init with parameters if callAtInit is an array of parameters\n        // Just call without parameters if callAtInit is true\n        callAtInit && handler.apply(null, Array.isArray(callAtInit) ? callAtInit : null);\n        // Return a handler which will remove this listener\n        // Very handy with React hooks like useLayoutEffect\n        return () => remove(handler);\n    }\n    // Return public API\n    return {\n        // Add and return a remove thunk\n        add(handler, callAtInit = false) {\n            return add(handler, false, callAtInit);\n        },\n        // Add once and return a remove thunk\n        once(handler) {\n            return add(handler, true);\n        },\n        remove,\n        dispatch: (...rest) => _listeners.map(listener => {\n            // Remove listener if this is a once\n            listener[1] && remove(listener[0]);\n            // Execute with parameters\n            return listener[0](...rest);\n        }),\n        clear() { _listeners = []; },\n        get listeners() { return _listeners.map(l => l[0]); }\n    };\n}\nexport default Signal;\n","import { Signal } from \"./signal.es2020.mjs\";\n// ----------------------------------------------------------------------------- STATE SIGNAL\nexport function StateSignal(_state = null, _signal = Signal()) {\n    return {\n        ..._signal,\n        get state() { return _state; },\n        // Add and return a remove thunk\n        add(handler, callAtInit = false) {\n            // Call at init will dispatch current state and not a configurable array of props\n            return _signal.add(handler, callAtInit === true ? [_state] : false);\n        },\n        // Add once and return a remove thunk\n        once(handler) {\n            return _signal.once(handler);\n        },\n        dispatch(state) {\n            _state = state;\n            return _signal.dispatch(state);\n        },\n        // Remove listeners and stored state\n        clear() {\n            _signal.clear();\n            _state = null;\n        }\n    };\n}\n","import { Signal } from \"./signal.es2020.mjs\";\nfunction prepareInitialValue(initialValue) {\n    return (typeof initialValue === \"function\"\n        ? initialValue()\n        : initialValue);\n}\n/**\n * A bit is a piece of data associated to a signal, a getter and a setter.\n * A raw bit does not dispatch the signal when set on purpose. It's meant to be\n * used by an upper function which holds dispatch as a private member.\n * @param initialValue Initial value or initial value generator.\n */\nexport function createBit(initialValue) {\n    // Init and store the value in this scope\n    let value = prepareInitialValue(initialValue);\n    // Create signal and extract dispatch method from it\n    // So code accessing signal externally would not be able to dispatch and mess\n    const onChanged = Signal();\n    const { dispatch } = onChanged;\n    onChanged.dispatch = null;\n    // Return bit API\n    return {\n        onChanged,\n        dispatch,\n        get() { return value; },\n        set(newValue) { value = newValue; },\n        dispose() {\n            onChanged.clear();\n            value = null;\n        }\n    };\n}\n/**\n * The simplest observable, holds a value a\tand dispatch when mutated.\n * No shallow check, no invalidation step, not cancellable.\n * Everything is synchronous.\n * Has a private _dispose method to destroy it from memory.\n * @param initialValue Initial value or initial value generator.\n */\nexport function createBasicObservable(initialValue) {\n    // Create the bit and extract private dispatch and setter\n    const { get, set, dispatch, ...bit } = createBit(initialValue);\n    return {\n        ...bit,\n        get value() { return get(); },\n        set(newValue) {\n            const oldValue = get();\n            set(newValue);\n            dispatch(newValue, oldValue);\n        }\n    };\n}\nexport function createStateObservable(initialValue, beforeChanged) {\n    // Create the bit and extract private dispatch and setter\n    const { get, set, dispatch, ...bit } = createBit(initialValue);\n    return {\n        ...bit,\n        get value() { return get(); },\n        async set(newValue) {\n            const oldValue = get();\n            set(newValue);\n            if (beforeChanged) {\n                // isLocked = true;\n                const haltChange = await beforeChanged(newValue, oldValue);\n                if (haltChange === true) {\n                    set(oldValue);\n                    // isLocked = false;\n                    return;\n                }\n            }\n            // isLocked = false;\n            dispatch(newValue, oldValue);\n        }\n    };\n}\nexport function createAsyncObservable(initialValue, beforeChanged) {\n    // Create the bit and extract private dispatch and setter\n    const { get, set, dispatch, ...bit } = createBit(initialValue);\n    let isChanging = false;\n    let wasAlreadyChanging = false;\n    return {\n        ...bit,\n        get value() { return get(); },\n        get isChanging() { return isChanging; },\n        get wasAlreadyChanging() { return wasAlreadyChanging; },\n        async set(newValue) {\n            // Keep old to check changes\n            const oldValue = get();\n            set(newValue);\n            // Call private changed as async (may change state asynchronously)\n            if (beforeChanged) {\n                if (isChanging)\n                    wasAlreadyChanging = true;\n                isChanging = true;\n                const haltChange = await beforeChanged(newValue, oldValue);\n                if (haltChange === true) {\n                    set(oldValue);\n                    isChanging = false;\n                    wasAlreadyChanging = false;\n                    return;\n                }\n                isChanging = false;\n                if (wasAlreadyChanging) {\n                    wasAlreadyChanging = false;\n                    return;\n                }\n            }\n            // Call public onChange signal with new and old values\n            dispatch(newValue, oldValue);\n        }\n    };\n}\n","import { VNode, VNodeBaseProps } from \"./common\";\nimport { ComponentInstance } from \"./component\";\n\n// ----------------------------------------------------------------------------- REF\n\nexport interface IRef <\n\tGDom extends Element = Element,\n\tGComponent extends ComponentInstance = ComponentInstance,\n> {\n\tdom\t\t\t\t:GDom\n\tcomponent\t\t:GComponent\n}\n\nexport interface IInternalRef <\n\tGDom extends Element = Element,\n\tGComponent extends ComponentInstance = ComponentInstance,\n> extends IRef {\n\tsetFromVNode\t: ( vnode:VNode<VNodeBaseProps, GComponent> ) => void\n}\n\nexport function ref <\n\tGDom extends Element = Element,\n\tGComponent extends ComponentInstance = ComponentInstance,\n> ():IRef<GDom, GComponent> {\n\tconst value:IInternalRef<GDom, GComponent> = {\n\t\tcomponent: null,\n\t\tdom: null,\n\t\tsetFromVNode ( vnode:VNode<VNodeBaseProps, GComponent> ) {\n\t\t\tvalue.dom \t\t= vnode.dom as GDom;\n\t\t\tvalue.component = vnode._component as GComponent;\n\t\t}\n\t}\n\treturn value as never as IRef<GDom, GComponent>;\n}\n\n// ----------------------------------------------------------------------------- REFS\n\nexport interface IRefs <\n\tGDom extends Element = Element,\n\tGComponent extends ComponentInstance = ComponentInstance,\n\t> {\n\tlist : IRef<GDom, GComponent>[]\n}\n\nexport interface IInternalRefs <\n\tGDom extends Element = Element,\n\tGComponent extends ComponentInstance = ComponentInstance,\n\t> extends IRefs {\n\tsetFromVNode\t: ( index:number, vnode:VNode<VNodeBaseProps, GComponent> ) => void\n}\n\nexport function refs <\n\tGComponent extends ComponentInstance = ComponentInstance,\n\tGDom extends Element = Element,\n> ():IRefs<GDom, GComponent> {\n\tconst value:IInternalRefs<GDom, GComponent> = {\n\t\tlist: [],\n\t\tsetFromVNode ( index:number, vnode:VNode<VNodeBaseProps, GComponent> ) {\n\t\t\t// Delete\n\t\t\tif ( vnode == null ) {\n\t\t\t\tdelete value.list[ index ]\n\t\t\t\tvalue.list.length --\n\t\t\t// Update\n\t\t\t} else if ( index in value.list ) {\n\t\t\t\tvalue.list[ index ].component\t= vnode._component as GComponent;\n\t\t\t\tvalue.list[ index ].dom \t \t= vnode.dom as GDom;\n\t\t\t// Create\n\t\t\t} else {\n\t\t\t\tvalue.list[ index ] = {\n\t\t\t\t\tdom \t\t: vnode.dom as GDom,\n\t\t\t\t\tcomponent\t: vnode._component as GComponent,\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn value as never as IRefs<GDom, GComponent>;\n}\n\n// FIXME : When using web components with original dom not from Reflex\n// FIXME : Move it in module web-components ?\n// export function find () {\n//\n// }","import { getHookedComponent } from \"./diff\";\nimport { _isFunction, LifecycleHandler, MountHandler } from \"./common\";\n\n// ----------------------------------------------------------------------------- MOUNT / UNMOUNT\n\nexport function mounted ( handler:MountHandler ) {\n\t// FIXME : In dev mode, maybe check if component is mounted ?\n\tgetHookedComponent()._mountHandlers.push( handler )\n}\n\nexport function unmounted ( handler:LifecycleHandler ) {\n\t// FIXME : In dev mode, maybe check if component is mounted ?\n\tgetHookedComponent()._unmountHandlers.push( handler )\n}\n\n// ----------------------------------------------------------------------------- TRACK CHANGE AFTER RENDER\n\ntype UnmountTrackHandler <GState> = (oldState:GState) => void\ntype TrackHandler <GState> = (newState:GState, oldState:GState) => UnmountTrackHandler<GState>|void\ntype DetectChanges <GState> = () => GState\n\nexport function changed <GState> ( detectChanges:DetectChanges<GState>|TrackHandler<GState>, executeHandler?:TrackHandler<GState> ) {\n\tconst component = getHookedComponent()\n\t// No executeHandler function means detectChanges has been omitted.\n\t// Do not check any change, just call executeHandler after every render.\n\tif ( !executeHandler ) {\n\t\tcomponent._renderHandlers.push( detectChanges );\n\t\treturn;\n\t}\n\t// Get first state\n\tlet state = (detectChanges as DetectChanges<GState>)()\n\t// Stored previous unmount handler\n\tlet previousUnmountHandler:LifecycleHandler\n\t// Update new state and call handlers\n\tfunction updateState ( oldState:GState ) {\n\t\t// Call previous handler with old state if it exists\n\t\tpreviousUnmountHandler && previousUnmountHandler( oldState );\n\t\t// Call executeHandler with new and old state\n\t\tconst executeResult = executeHandler( state, oldState )\n\t\t// Get previous unmount handler from return or cancel it\n\t\tpreviousUnmountHandler = (\n\t\t\t_isFunction(executeResult)\n\t\t\t? executeResult as UnmountTrackHandler<GState>\n\t\t\t: null\n\t\t)\n\t}\n\t// After component just rendered\n\tlet firstRender = true\n\tcomponent._renderHandlers.push( () => {\n\t\t// Always execute handler at first render\n\t\tif ( firstRender ) {\n\t\t\tupdateState( null );\n\t\t\tfirstRender = false;\n\t\t} else {\n\t\t\t// Otherwise, detect changes\n\t\t\tconst oldState = state;\n\t\t\tstate = ( detectChanges as DetectChanges<GState> )()\n\t\t\tif( oldState != state )\n\t\t\t\tupdateState( oldState )\n\t\t}\n\t})\n}\n","import { h, state, changed, ref } from \"../../src/reflex\";\nimport { createUID, firstnameList, lastnameList, pickRandom, randBoolean } from \"../demoHelpers\";\n\ninterface IUser {\n\tfirstname\t:string\n\tlastname\t:string\n\tisAdmin\t\t?:boolean\n\tid\t\t\t:string\n}\n\nfunction getRandomUser ():IUser {\n\treturn {\n\t\tfirstname\t: pickRandom( firstnameList ),\n\t\tlastname\t: pickRandom( lastnameList ),\n\t\tisAdmin\t\t: randBoolean(),\n\t\tid\t\t\t: createUID()\n\t}\n}\n\n// -----------------------------------------------------------------------------\n\ninterface IUserComponentProps {\n\tuser\t\t:IUser\n}\n\nfunction UserComponent ( props:IUserComponentProps ) {\n\n\t// Here props are a proxy, so it's values can be updated dynamically\n\n\t// PATTERN #1 - Detect prop changes\n\t// Will show a log if isAdmin is changing on props.user\n\tchanged( () => props.user.isAdmin, isAdmin => {\n\t\tconsole.log(`PATTERN #1 - User ${props.user.firstname} ${isAdmin ? 'is' : 'is not'} admin`)\n\t})\n\n\t// PATTERN #2 - Attach and detach from prop changes\n\t// Will disconnect previous user from chat, and connect new user\n\tchanged( () => props.user.id, newId => {\n\t\tconsole.log(`PATTERN #2 - Connect user ${newId} to chat panel`)\n\t\treturn oldId => {\n\t\t\tconsole.log(`PATTERN #2 - Disconnect user ${oldId} from chat`)\n\t\t}\n\t})\n\n\t// REFS - Refs are updated just after dom has been updated.\n\t// This proves that after render, refs are updated correctly and available right after\n\tconst root = ref()\n\tconst image = ref()\n\tchanged(() => {\n\t\tconsole.log(\"REFS - UserComponent just rendered\", root.component, image.dom.getAttribute('src'))\n\t})\n\n\treturn () => <div ref={ root } class=\"UserComponent\">\n\t\tHello { props.user.firstname } { props.user.lastname }\n\t\t<img src={`https://i.pravatar.cc/150?u=${props.user.id}`} ref={ image } />\n\t</div>\n}\n\nexport function PropsDemoApp () {\n\tconst currentUser = state<IUser>( getRandomUser )\n\treturn () => <div>\n\t\t<button onClick={ e => currentUser.set( getRandomUser ) }>Change user</button>\n\t\t<UserComponent user={ currentUser.value } />\n\t</div>\n}\n","\nexport const toHex = (n:number) => (~~n).toString(16)\nexport const createUID = () => `${toHex(Date.now())}-${toHex(Math.random() * 999999999)}`;\nexport const pickRandom = <G extends any>(array:G[]):G => array[ ~~(Math.random() * array.length) ]\nexport const rand = (max:number) => ~~(Math.random() * max)\nexport const randBoolean = (threshold = .5) => (Math.random() > threshold)\n\nexport const foodList = [\"Cheese\", \"Carrots\", \"Pastas\", \"Pizza\", \"Burgers\", \"Ham\", \"Salad\", \"Mustard\"]\nexport const colorList = [\"Red\", \"Blue\", \"Yellow\", \"Purple\", \"Orange\", \"Black\", \"White\", \"Green\"]\nexport const firstnameList = [\"Alfred\", \"Jessica\", \"Gwen\", \"Jeanne\"]\nexport const lastnameList = [\"Dupont\", \"Smith\", \"Stevensen\", \"Odea\"]\n"],"names":[],"version":3,"file":"index.253397d1.js.map","sourceRoot":"/__parcel_source_root/"}