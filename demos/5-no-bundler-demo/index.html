<html>
<head>
    <title>Reflex - No Bundler Demo</title>
    <!-- Load locally built bundle for tests purpose -->
<!--    <script src="../../dist/reflex+signal.es2017.min.js"></script>-->
<!--    <script src="../../../dist/reflex+signal.es2017.min.js"></script>-->
    <!-- Bundle loaded from UNPKG -->
    <script src="https://unpkg.com/@zouloux/reflex"></script>
</head>
<body>
    <script>
		// Import reflex, require function is exposed by the loaded bundle
		const { render, h, state, ref } = require("@zouloux/reflex")
        // Create a stateful component with
		function StateTest () {
			const _s = state( 0 );
			const _r = ref()
            // Signal test
            _s.onChanged.add( (newValue, oldValue) => {
				console.log('Signal state changed', {newValue, oldValue})
            })
            // Render some html
			return () => h('div', {}, [
				// A button, which will increase the state when clicked
                h('button', {
					onClick: async e => {
						// Increment state, we await so the DOM is ready after
						await _s.set( _s.value + 1 )
                        // Show passed event and show updated dom
                        console.log('Event', e)
						console.log('Ref test:', _r.dom.innerHTML)
					}
                }, 'Click me'),
                // Show the number of click from state
                h('br', {}),h('br', {}),
                h('span', { ref: _r }, 'Total clicked ' + _s.value)
            ])
        }
		// Create app V-DOM
        const App = h('div', { className: 'super' },
            h('h1', {}, 'Hello ðŸ‘‹ from Reflex' ),
            h('h4', {}, 'Loaded from UNPKG. No bundler, no JSX'),
			h(StateTest, {})
        )
        // Render this stateful app into body
		render( App, document.body )
    </script>
</body>
</html>