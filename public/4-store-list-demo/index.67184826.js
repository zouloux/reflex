var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequirea1a1;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,o.call(a.exports,a,a.exports),a.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){n[e]=t},e.parcelRequirea1a1=o);var a=o("leUMy"),l=(o("leUMy"),o("8HdjB"));a=o("leUMy");function d(e){const t=(0,a.state)(e.getState());return e.onAfter.add((()=>t.set(e.getState()))),t}var i=o("hvc62");const r=function(e=null,t=null,n){const o=(0,l.Signal)(),a=(0,l.Signal)(),d=(0,l.Signal)();let i=!1,r=!1,s=!1;const m=async(t=e)=>{if(i)return s=!0,void(e=t);r=!0;let n=e;if(o.listeners.length>0)try{await Promise.all(o.listeners.map((async e=>await e(t,n))))}catch(e){return d.dispatch(e),void(r=!1)}e=t,r=!1,a.dispatch(t,n)};return{getState:()=>e,setState:t=>m("function"==typeof t?t(e):t),dispatch:(n,...o)=>new Promise((async(a,l)=>{if(r)return l("updating");await m(t[n](e,...o)),a()})),onBefore:o,onAfter:a,onCanceled:d,async lock(t){i=t,!i&&s&&(s=!1,await m(e))},get locked(){return i},get isUpdating(){return r},actions:n}}([],{clearList:()=>[],addItem:(e,t,n)=>"bottom"===t?[...e,n]:[n,...e],removeItem:(e,t)=>e.filter((e=>e!=t)),moveItem(e,t,n){const o=e.indexOf(t)+n;if(!(o<0||o>=e.length))return(e=this.removeItem(e,t)).splice(o,0,t),e},addRandomItems(e,t=0){t||=(0,i.rand)(5+e.length)+1;for(let n=0;n<t;++n)e=this.addItem(e,"bottom",{id:(0,i.createUID)(),name:(0,i.pickRandom)(i.colorList)+" "+(0,i.pickRandom)(i.foodList)});return e},removeRandomItems(e){const t=(0,i.rand)(e.length)+1;for(let n=0;n<t;++n){const t=(0,i.pickRandom)(e);e=this.removeItem(e,t)}return e}}),s={border:"1px solid black"};function m(e){const{item:t}=e;return(0,a.h)("tr",{class:"ListItem","data-id":t.id,style:s},(0,a.h)("td",null,t.name),(0,a.h)("td",null,(0,a.h)("button",{onClick:e=>r.dispatch("moveItem",t,-1)},"⬆")),(0,a.h)("td",null,(0,a.h)("button",{onClick:e=>r.dispatch("moveItem",t,1)},"⬇")),(0,a.h)("td",null,(0,a.h)("button",{onClick:e=>r.dispatch("removeItem",t)},"Remove")))}function c(e){const t=d(r),n=(0,a.ref)();function o(e){e.preventDefault(),n.dom.value&&(r.dispatch("addItem","top",{name:n.dom.value,id:(0,i.createUID)()}),n.dom.value="")}function l(){return(0,a.h)("div",{className:"StatefulDemoApp_controls"},(0,a.h)("table",null,(0,a.h)("button",{onClick:e=>r.dispatch("addRandomItems")},"Add random items to bottom"),(0,a.h)("button",{onClick:e=>r.dispatch("addRandomItems",1e3)},"Add 1.000 items to bottom"),(0,a.h)("button",{onClick:e=>r.dispatch("addRandomItems",1e4)},"Add 10.000 items to bottom"),(0,a.h)("button",{onClick:e=>r.dispatch("removeRandomItems")},"Remove random items"),(0,a.h)("button",{onClick:e=>r.dispatch("clearList")},"Clear list")),(0,a.h)("form",{onSubmit:o},(0,a.h)("table",null,(0,a.h)("input",{id:"StatefulDemoApp_nameInput",ref:n,type:"text",name:"name",placeholder:"Name ..."}),(0,a.h)("button",{type:"submit"},"Add to top"))))}return()=>(0,a.h)("div",{class:"StatefulDemoApp"},(0,a.h)("span",null,"Root render index : ",e.renderIndex),(0,a.h)(l,null),(0,a.h)("h3",null,t.value.length," element",t.value.length>1?"s":""),(0,a.h)("table",null,t.value.map((e=>(0,a.h)(m,{item:e,key:e.id})))))}var u=o("3AbUl");(0,u.setReflexDebug)(!0);let h=0;!function e(){const t=(0,u.trackPerformances)("Root rendering");(0,a.render)((0,a.h)(c,{render:e,renderIndex:h++}),document.body),t()}();
//# sourceMappingURL=index.67184826.js.map
