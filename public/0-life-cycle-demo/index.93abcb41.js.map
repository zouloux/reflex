{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,gBCAAD,EAAAC,EAAA,S,YAGA,SAASC,EAAWC,GACnB,MAAMC,GAAW,EAAAJ,EAAAK,OAEjB,IAAIC,EAAU,EAOd,SAASC,IACRC,QAAQC,IAAI,cAAaH,GAE1B,OATA,EAAAN,EAAAU,UAAQ,KACPF,QAAQC,IAAI,oBAAoBL,EAASO,IAAIC,aACtC,KACNJ,QAAQC,IAAI,sBAAsBH,SAM7B,KAAM,EAAAN,EAAAa,GAAC,MAAG,CAACN,QAAUA,IAC3B,EAAAP,EAAAa,GAAC,QAAK,MACL,EAAAb,EAAAa,GAAC,KAAE,MACF,EAAAb,EAAAa,GAAC,KAAE,KAAC,SACJ,EAAAb,EAAAa,GAAC,KAAE,KAAGV,EAAMW,KAAKC,MAElB,EAAAf,EAAAa,GAAC,KAAE,MACF,EAAAb,EAAAa,GAAC,KAAE,KAAC,WACJ,EAAAb,EAAAa,GAAC,KAAE,CAACR,IAAMD,GAAaD,EAAMW,KAAKE,UAMtC,SAASC,EAAWd,GAQnB,OAPA,EAAAH,EAAAU,UAAQ,KACPF,QAAQC,IAAI,yBAEb,EAAAT,EAAAkB,YAAU,KACTV,QAAQC,IAAI,0BAGN,KAAM,EAAAT,EAAAa,GAAC,MAAG,CAACM,MAAO,CAAEC,OAAQ,qBAClC,EAAApB,EAAAa,GAAC,OAAI,KAAC,aACN,EAAAb,EAAAa,GAACX,EAAQ,CAACY,KAAOX,EAAMW,QACvB,EAAAd,EAAAa,GAAC,SAAM,CAACN,QAAUc,GAAKlB,EAAMmB,cAAenB,EAAMW,OAAS,WAItD,SAASS,IAEf,MAAMC,GAAgB,EAAAxB,EAAAyB,QAAO,GAGvBC,GAAO,EAAA1B,EAAAyB,OAAM,IAEbE,GAAW,EAAA3B,EAAA4B,QAUjB,SAASC,EAAiBf,GACzBY,EAAKI,IAAKJ,EAAKK,MAAMC,QAAQC,GAAKA,GAAKnB,KAGxC,SAASoB,IACR,OAAO,EAAAlC,EAAAa,GAAC,MAAG,MACV,EAAAb,EAAAa,GAAC,SAAM,CAACN,QAAUc,GAdpB,WACC,MAAMP,EAAO,CACZC,IAAI,EAAAoB,EAAAC,aACJpB,MAAO,IAAG,EAAAmB,EAAAE,YAAWF,EAAAG,eAAc,EAAAH,EAAAE,YAAWF,EAAAI,aAE/Cb,EAAKI,IAAK,IAAIJ,EAAKK,MAAOjB,IASF0B,IAAgB,kBACvC,EAAAxC,EAAAa,GAAC,KAAE,KAAC,YACJ,EAAAb,EAAAa,GAAC,MAAG,KACDa,EAAKK,MAAMU,KAAK3B,IACjB,EAAAd,EAAAa,GAACI,EAAQ,CACRZ,IAAMsB,EAAWe,IAAM5B,EAAKC,GAC5BD,KAAOA,EACPQ,cAAgBO,QAOrB,MAAO,KAAM,EAAA7B,EAAAa,GAAC,MAAG,MAChB,EAAAb,EAAAa,GAAC,SAAM,CAACN,QAAUc,GAnCgBG,EAAcM,KAAMN,EAAcO,QAoCjEP,EAAcO,MAAQ,YAAc,cAEvC,EAAA/B,EAAAa,GAAC,KAAE,OAAE,EAAAb,EAAAa,GAAC,KAAE,MACNW,EAAcO,QAAS,EAAA/B,EAAAa,GAACqB,EAAI,CAACS,MAAO,MDjFxC,EAAAC,EAAAC,iBAAgB,GAET,WACN,MAAMC,GAAI,EAAAF,EAAAG,mBAAkB,mBAC5B,EAAA/C,EAAAgD,SAAQ,EAAAhD,EAAAa,GAACU,EAAgB,MAAK0B,SAASC,MACvCJ,IAGDK","sources":["demos/0-life-cycle-demo/index.tsx","demos/0-life-cycle-demo/LifecycleDemoApp.tsx"],"sourcesContent":["import { h, render } from \"../../src/reflex\";\nimport { trackPerformances, setReflexDebug } from \"../../src/reflex/debug\";\nimport { LifecycleDemoApp } from \"./LifecycleDemoApp\";\n\n// -----------------------------------------------------------------------------\n\nsetReflexDebug( true )\n\nexport function init () {\n\tconst p = trackPerformances(\"Root rendering\")\n\trender( <LifecycleDemoApp />, document.body )\n\tp();\n}\n\ninit();\n","import { h, state, ref, refs, mounted, unmounted } from \"../../src/reflex\";\nimport { colorList, createUID, foodList, pickRandom } from \"../demoHelpers\";\n\nfunction SubChild ( props ) {\n\tconst titleRef = ref()\n\t// Local stateless variable without ref ðŸ‘€\n\tlet clicked = 0\n\tmounted(() => {\n\t\tconsole.log(`SubChild mounted ${titleRef.dom.innerHTML}`)\n\t\treturn () => {\n\t\t\tconsole.log(`SubChild unmounted ${clicked}`)\n\t\t}\n\t})\n\tfunction onClick () {\n\t\tconsole.log(`Clicked ${++clicked}`)\n\t}\n\treturn () => <div onClick={ onClick }>\n\t\t<table>\n\t\t\t<tr>\n\t\t\t\t<td>Id :</td>\n\t\t\t\t<td>{ props.item.id }</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>Name :</td>\n\t\t\t\t<td ref={ titleRef }>{ props.item.title }</td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n}\n\nfunction ListItem ( props ) {\n\tmounted(() => {\n\t\tconsole.log(\"List item mounted\")\n\t})\n\tunmounted(() => {\n\t\tconsole.log(\"List item unmounted\")\n\t});\n\n\treturn () => <div style={{ border: `1px solid white` }}>\n\t\t<span>ListItem</span>\n\t\t<SubChild item={ props.item }/>\n\t\t<button onClick={ e => props.removeClicked( props.item ) }>Remove</button>\n\t</div>\n}\n\nexport function LifecycleDemoApp () {\n\n\tconst isListVisible = state( true )\n\tconst toggleListVisibility = () => isListVisible.set( !isListVisible.value )\n\n\tconst list = state([])\n\n\tconst itemRefs = refs()\n\n\tfunction addListItem () {\n\t\tconst item = {\n\t\t\tid: createUID(),\n\t\t\ttitle: `${pickRandom(colorList)} ${pickRandom(foodList)}`,\n\t\t}\n\t\tlist.set( [...list.value, item ] );\n\t}\n\n\tfunction removeListItem ( item ) {\n\t\tlist.set( list.value.filter( c => c != item ) )\n\t}\n\n\tfunction List () {\n\t\treturn <div>\n\t\t\t<button onClick={ e => addListItem() }>Add list item</button>\n\t\t\t<h3>Items :</h3>\n\t\t\t<div>\n\t\t\t\t{ list.value.map( item =>\n\t\t\t\t\t<ListItem\n\t\t\t\t\t\tref={ itemRefs } key={ item.id }\n\t\t\t\t\t\titem={ item }\n\t\t\t\t\t\tremoveClicked={ removeListItem }\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t}\n\n\treturn () => <div>\n\t\t<button onClick={ e => toggleListVisibility() }>\n\t\t\t{ isListVisible.value ? \"Hide list\" : \"Show list\" }\n\t\t</button>\n\t\t<br/><br/>\n\t\t{ isListVisible.value && <List pure={ false } /> }\n\t</div>\n}"],"names":["$leUMy","parcelRequire","$cea7cc08f9b6a47b$var$SubChild","props","titleRef","ref","clicked","onClick","console","log","mounted","dom","innerHTML","h","item","id","title","$cea7cc08f9b6a47b$var$ListItem","unmounted","style","border","e","removeClicked","$cea7cc08f9b6a47b$export$68b582a213d1d1fa","isListVisible","state","list","itemRefs","refs","removeListItem","set","value","filter","c","List","$hvc62","createUID","pickRandom","colorList","foodList","addListItem","map","key","pure","$3AbUl","setReflexDebug","p","trackPerformances","render","document","body","$47b8d2ed67d0e700$export$2cd8252107eb640b"],"version":3,"file":"index.93abcb41.js.map"}