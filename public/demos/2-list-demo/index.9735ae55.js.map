{"mappings":"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","sources":["demos/2-list-demo/index.tsx","src/reflex/debug.ts","demos/2-list-demo/ListDemoApp.tsx","demos/demoHelpers.ts"],"sourcesContent":["import { h, render } from \"../../src/reflex\";\nimport { trackPerformances, setReflexDebug } from \"../../src/reflex/debug\";\nimport { ListDemoApp } from \"./ListDemoApp\";\n\n// -----------------------------------------------------------------------------\n\nsetReflexDebug( true )\n\nlet renderIndex = 0\nexport function init () {\n\tconst p = trackPerformances(\"Root rendering\")\n\trender( <ListDemoApp render={ init } renderIndex={ renderIndex ++ } />, document.body );\n\tp();\n}\n\ninit();\n","\n// ----------------------------------------------------------------------------- ENABLE / DISABLE\n\nlet _enableReflexDebug = false;\n\nexport function getReflexDebug () { return _enableReflexDebug }\nexport function setReflexDebug (value:boolean) {\n\t_enableReflexDebug = value\n}\n\n// ----------------------------------------------------------------------------- TRACK PERFORMANCES\n\nexport function trackPerformances ( subject:string ) {\n\tif ( !_enableReflexDebug || process.env.NODE_ENV === \"production\" )\n\t\treturn () => {};\n\tconst start = performance.now()\n\treturn () => {\n\t\tconst delta = ~~( performance.now() - start )\n\t\tconsole.info( subject, delta < 1000 ? `${delta}ms` : `${delta/1000}s`)\n\t}\n}","import { h } from \"../../src/reflex\";\nimport { colorList, createUID, foodList, pickRandom, rand } from \"../demoHelpers\";\n\n// ----------------------------------------------------------------------------- DATA MODEL\n// TODO : Convert to state then store\n\nlet _listItems:IListItem[] = []\n\ninterface IListItem {\n\tname\t:string\n\tid\t\t:string\n}\n\nconst clearList = () => { _listItems = [] }\nconst addItem = ( position:\"top\"|\"bottom\", item:IListItem ) => {\n\tif ( position === \"bottom\" )\n\t\t_listItems.push( item )\n\telse\n\t\t_listItems.unshift( item )\n}\nconst removeItem = ( item:IListItem ) => {\n\t_listItems = _listItems.filter( currentItem => currentItem != item )\n}\nconst moveItem = ( item:IListItem, offset:number ) => {\n\tconst index = _listItems.indexOf( item ) + offset\n\tif ( index < 0 || index >= _listItems.length ) return;\n\tremoveItem( item )\n\t_listItems.splice(index, 0, item);\n}\n\n// ----------------------------------------------------------------------------- DEFAULT ITEMS\n\nfunction addRandomItems ( total:number = 0 ) {\n\ttotal ||= rand( 5 + _listItems.length ) + 1\n\tfor ( let i = 0; i < total; i++ ) {\n\t\taddItem(\"bottom\", {\n\t\t\tid: createUID(),\n\t\t\tname: pickRandom(colorList) + \" \" + pickRandom(foodList)\n\t\t})\n\t}\n}\n\nfunction removeRandomItems () {\n\tconst total = rand( _listItems.length ) + 1\n\tfor ( let i = 0; i < total; i++ ) {\n\t\tconst item = pickRandom( _listItems )\n\t\tremoveItem( item )\n\t}\n}\n\n// ----------------------------------------------------------------------------- LIST ITEM\n\nconst listItemStyle = {\n\tborder: `1px solid black`\n}\n\ninterface IListItemProps {\n\titem\t: IListItem\n\trender\t: () => void\n\tkey\t\t?\n}\nfunction ListItem ( props:IListItemProps ) {\n\tfunction removeClicked () {\n\t\tremoveItem( props.item )\n\t\tprops.render();\n\t}\n\tfunction moveUpClicked () {\n\t\tmoveItem( props.item, -1 )\n\t\tprops.render();\n\t}\n\tfunction moveDownClicked () {\n\t\tmoveItem( props.item, +1 )\n\t\tprops.render();\n\t}\n\treturn <tr class=\"ListItem\" data-id={ props.item.id } style={ listItemStyle }>\n\t\t<td>{ props.item.name }</td>\n\t\t{/*<td><button onClick={ moveUpClicked } disabled={ _listItems.length < 2 }>⬆</button></td>*/}\n\t\t{/*<td><button onClick={ moveDownClicked } disabled={ _listItems.length < 2 }>⬇</button></td>*/}\n\t\t<td><button onClick={ moveUpClicked }>⬆</button></td>\n\t\t<td><button onClick={ moveDownClicked }>⬇</button></td>\n\t\t<td><button onClick={ removeClicked }>Remove</button></td>\n\t</tr>\n}\n\n// ----------------------------------------------------------------------------- LIST APP\n\ninterface IListDemoAppProps {\n\trender\t\t\t: () => void\n\t// To force new renders\n\trenderIndex\t\t:number\n}\n\nexport function ListDemoApp ( props:IListDemoAppProps ) {\n\n\tfunction addRandomItemClicked ( max:number = 0 ) {\n\t\taddRandomItems( max );\n\t\tprops.render();\n\t}\n\tfunction removeRandomItemsClicked () {\n\t\tremoveRandomItems();\n\t\tprops.render();\n\t}\n\tfunction clearListClicked () {\n\t\tclearList();\n\t\tprops.render();\n\t}\n\tfunction controlSubmitted ( event:Event ) {\n\t\tevent.preventDefault()\n\t\t// TODO : Implement refs\n\t\tconst nameInput = document.getElementById(\"ListDemoApp_nameInput\") as HTMLInputElement\n\t\tif ( !nameInput.value ) return;\n\t\taddItem(\"top\", {\n\t\t\tname: nameInput.value,\n\t\t\tid: createUID()\n\t\t})\n\t\tnameInput.value = \"\"\n\t\tprops.render();\n\t}\n\n\treturn <div class=\"ListDemoApp\">\n\t\t<div class=\"ListDemoApp_controls\">\n\t\t\t<table>\n\t\t\t\t<button onClick={ e => addRandomItemClicked() }>Add random items to bottom</button>\n\t\t\t\t<button onClick={ e => addRandomItemClicked(1000) }>Add 1000 items to bottom</button>\n\t\t\t\t<button onClick={ removeRandomItemsClicked }>Remove random items</button>\n\t\t\t\t<button onClick={ clearListClicked }>Clear list</button>\n\t\t\t</table>\n\t\t\t<form onSubmit={ controlSubmitted }>\n\t\t\t\t<table>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"ListDemoApp_nameInput\"\n\t\t\t\t\t\ttype=\"text\" name=\"name\" placeholder=\"Name ...\"\n\t\t\t\t\t/>\n\t\t\t\t\t<button type=\"submit\">Add to top</button>\n\t\t\t\t</table>\n\t\t\t</form>\n\t\t</div>\n\t\t<h3>{_listItems.length} element{ _listItems.length> 1 ? 's' : '' }</h3>\n\t\t<table>\n\t\t\t{ _listItems.map( item =>\n\t\t\t\t<ListItem item={ item } key={ item.id } render={ props.render } />\n\t\t\t)}\n\t\t</table>\n\t</div>\n}","\nexport const toHex = (n:number) => (~~n).toString(16)\nexport const createUID = () => `${toHex(Date.now())}-${toHex(Math.random() * 999999999)}`;\nexport const pickRandom = <G extends any>(array:G[]):G => array[ ~~(Math.random() * array.length) ]\nexport const rand = (max:number) => ~~(Math.random() * max)\nexport const randBoolean = (threshold = .5) => (Math.random() > threshold)\n\nexport const foodList = [\"Cheese\", \"Carrots\", \"Pastas\", \"Pizza\", \"Burgers\", \"Ham\", \"Salad\", \"Mustard\"]\nexport const colorList = [\"Red\", \"Blue\", \"Yellow\", \"Purple\", \"Orange\", \"Black\", \"White\", \"Green\"]\nexport const firstnameList = [\"Alfred\", \"Jessica\", \"Gwen\", \"Jeanne\"]\nexport const lastnameList = [\"Dupont\", \"Smith\", \"Stevensen\", \"Odea\"]\n"],"names":["$leUMy","parcelRequire","$228131962d4ca37f$var$_enableReflexDebug","$00c98e03044c15dd$export$7ea66e3774a60b67","n","toString","$00c98e03044c15dd$export$c55f232b018cefe7","Date","now","Math","random","$00c98e03044c15dd$export$2e015b6955893291","array","length","$00c98e03044c15dd$export$bb0a9c36cf454ea0","max","$00c98e03044c15dd$export$4815de0a6e6c5145","$00c98e03044c15dd$export$9afc515fe5566574","$da30bdf05e7ce3d0$var$_listItems","$da30bdf05e7ce3d0$var$addItem","position","item","push","unshift","$da30bdf05e7ce3d0$var$removeItem","filter","currentItem","$da30bdf05e7ce3d0$var$moveItem","offset","index","indexOf","splice","$da30bdf05e7ce3d0$var$listItemStyle","border","$da30bdf05e7ce3d0$var$ListItem","props","h","class","id","style","name","onClick","render","$da30bdf05e7ce3d0$export$efa87b5c2f9634c4","addRandomItemClicked","total","i","$da30bdf05e7ce3d0$var$addRandomItems","e","$da30bdf05e7ce3d0$var$removeRandomItems","onSubmit","event","preventDefault","nameInput","document","getElementById","value","type","placeholder","map","key","$715908967ac132af$var$renderIndex","$715908967ac132af$export$2cd8252107eb640b","p","renderIndex","body"],"version":3,"file":"index.9735ae55.js.map"}