var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},n={},o=t.parcelRequirea1a1;null==o&&((o=function(t){if(t in e)return e[t].exports;if(t in n){var o=n[t];delete n[t];var a={id:t,exports:{}};return e[t]=a,o.call(a.exports,a,a.exports),a.exports}var l=new Error("Cannot find module '"+t+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(t,e){n[t]=e},t.parcelRequirea1a1=o);var a=o("leUMy"),l=(o("leUMy"),o("8HdjB"));a=o("leUMy");function r(t){const e=(0,a.state)(t.getState());return t.onAfter.add((()=>e.set(t.getState()))),e}const d=t=>(~~t).toString(16),i=()=>`${d(Date.now())}-${d(999999999*Math.random())}`,s=t=>t[~~(Math.random()*t.length)],m=t=>~~(Math.random()*t),u=["Cheese","Carrots","Pastas","Pizza","Burgers","Ham","Salad","Mustard"],c=["Red","Blue","Yellow","Purple","Orange","Black","White","Green"],h=function(t=null,e=null,n){const o=(0,l.Signal)(),a=(0,l.Signal)(),r=(0,l.Signal)();let d=!1,i=!1,s=!1;const m=async(e=t)=>{if(d)return s=!0,void(t=e);i=!0;let n=t;if(o.listeners.length>0)try{await Promise.all(o.listeners.map((async t=>await t(e,n))))}catch(t){return r.dispatch(t),void(i=!1)}t=e,i=!1,a.dispatch(e,n)};return{getState:()=>t,setState:e=>m("function"==typeof e?e(t):e),dispatch:(n,...o)=>new Promise((async(a,l)=>{if(i)return l("updating");await m(e[n](t,...o)),a()})),onBefore:o,onAfter:a,onCanceled:r,async lock(e){d=e,!d&&s&&(s=!1,await m(t))},get locked(){return d},get isUpdating(){return i},actions:n}}([],{clearList:()=>[],addItem:(t,e,n)=>"bottom"===e?[...t,n]:[n,...t],removeItem:(t,e)=>t.filter((t=>t!=e)),moveItem(t,e,n){const o=t.indexOf(e)+n;if(!(o<0||o>=t.length))return(t=this.removeItem(t,e)).splice(o,0,e),t},addRandomItems(t,e=0){e||=m(5+t.length)+1;for(let n=0;n<e;++n)t=this.addItem(t,"bottom",{id:i(),name:s(c)+" "+s(u)});return t},removeRandomItems(t){const e=m(t.length)+1;for(let n=0;n<e;++n){const e=s(t);t=this.removeItem(t,e)}return t}}),p={border:"1px solid black"};function f(t){const{item:e}=t;return(0,a.h)("tr",{class:"ListItem","data-id":e.id,style:p},(0,a.h)("td",null,e.name),(0,a.h)("td",null,(0,a.h)("button",{onClick:t=>h.dispatch("moveItem",e,-1)},"⬆")),(0,a.h)("td",null,(0,a.h)("button",{onClick:t=>h.dispatch("moveItem",e,1)},"⬇")),(0,a.h)("td",null,(0,a.h)("button",{onClick:t=>h.dispatch("removeItem",e)},"Remove")))}function v(t){const e=r(h),n=(0,a.ref)();function o(t){t.preventDefault(),n.dom.value&&(h.dispatch("addItem","top",{name:n.dom.value,id:i()}),n.dom.value="")}function l(){return(0,a.h)("div",{className:"StatefulDemoApp_controls"},(0,a.h)("table",null,(0,a.h)("button",{onClick:t=>h.dispatch("addRandomItems")},"Add random items to bottom"),(0,a.h)("button",{onClick:t=>h.dispatch("addRandomItems",1e3)},"Add 1.000 items to bottom"),(0,a.h)("button",{onClick:t=>h.dispatch("addRandomItems",1e4)},"Add 10.000 items to bottom"),(0,a.h)("button",{onClick:t=>h.dispatch("removeRandomItems")},"Remove random items"),(0,a.h)("button",{onClick:t=>h.dispatch("clearList")},"Clear list")),(0,a.h)("form",{onSubmit:o},(0,a.h)("table",null,(0,a.h)("input",{id:"StatefulDemoApp_nameInput",ref:n,type:"text",name:"name",placeholder:"Name ..."}),(0,a.h)("button",{type:"submit"},"Add to top"))))}return()=>(0,a.h)("div",{class:"StatefulDemoApp"},(0,a.h)("span",null,"Root render index : ",t.renderIndex),(0,a.h)(l,null),(0,a.h)("h3",null,e.value.length," element",e.value.length>1?"s":""),(0,a.h)("table",null,e.value.map((t=>(0,a.h)(f,{item:t,key:t.id})))))}let b=!1;b=!0;let g=0;!function t(){const e=()=>{};(0,a.render)((0,a.h)(v,{render:t,renderIndex:g++}),document.body),e()}();
//# sourceMappingURL=index.d83bb7e3.js.map
